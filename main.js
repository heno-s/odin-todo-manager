(()=>{"use strict";function t(t){const d=function(t){const{title:d,description:i,priority:s,dueDate:c,id:n}=t,r=document.createElement("div");r.classList.add("todo");const a=document.createElement("input");a.type="checkbox",a.classList.add("priority"),o(a,s);const l=e(d,i,c),u=document.createElement("div");return u.classList.add("mdi"),u.classList.add("mdi-trash-can-outline"),r.appendChild(a),r.appendChild(l),r.appendChild(u),r.id=n,r}(t);document.querySelector(".todos").appendChild(d)}function e(t,e,o){const d=document.createElement("div");d.classList.add("todo-body");const i=document.createElement("div");if(i.classList.add("todo-title"),i.textContent=t,d.appendChild(i),e){const t=document.createElement("div");t.classList.add("todo-description"),t.textContent=e.substr(0,50)+(e.length>50?"...":""),d.appendChild(t)}if(o){const t=document.createElement("div");t.classList.add("todo-due-date");const e=document.createElement("div");e.classList.add("mdi"),e.classList.add("mdi-calendar-clock-outline");const i=document.createElement("div");i.classList.add("todo-date"),i.textContent=o,t.appendChild(e),t.appendChild(i),d.appendChild(t)}}function o(t,e){switch(+e){case 0:default:t.classList.add("priority-low");break;case 1:t.classList.add("priority-medium");break;case 2:t.classList.add("priority-high")}}const d={toggleTodoAddForm:function(){document.querySelector(".add-task").classList.toggle("hide");const t=document.querySelector("#todo-form");t.reset(),t.classList.toggle("hide")},appendProject:function(t){const e=function(t){const{title:e,id:o}=t,d=document.createElement("li");d.classList.add("project"),d.id=o;const i=document.createElement("span");i.classList.add("project-name"),i.textContent=e;const s=document.createElement("div");return s.classList.add("mdi"),s.classList.add("mdi-trash-can-outline"),d.appendChild(i),d.appendChild(s),d}(t);document.querySelector(".projects").appendChild(e)},setActiveProject:function(e){!function(){const t=document.querySelector(".project.active");t&&(t.classList.remove(".ative"),document.querySelector(".todos").innerHTML="")}(),document.getElementById(e.id).classList.add("active"),function(e){e.todos.forEach(t)}(e)},appendTodo:t,createEditForm:function(t){if(document.querySelector("#edit-form"))return null;const{title:e,description:o,priority:d,dueDate:i,id:s}=t,c=document.getElementById(t.id),n=function(){const t=document.querySelector("#todo-form").cloneNode(!0);return t.id="edit-form",t.reset(),t.classList.remove("hide"),t}();return n.dataset.id=s,n.title.value=e,n.description.value=o,n.priority.value=d,i&&(n.dueDate.valueAsDate=i),n.addEventListener("submit",(e=>{e.preventDefault();const[o,d,i,s]=[n.title.value,n.description.value,n.priority.value,n.dueDate.valueAsDate];t.edit(o,d,i,s)}),{once:!0}),n.querySelector(".close-form").addEventListener("click",(t=>{n.remove(),c.classList.remove("hide")}),{once:!0}),c.insertAdjacentElement("afterend",n),c.classList.add("hide"),n},editTodo:function(t){const{title:d,description:i,priority:s,id:c,dueDate:n}=t,r=document.getElementById(c);o(r.querySelector(".priority"),s);const a=e(d,i,n);r.querySelector(".todo-body").replaceWith(a),r.classList.remove("hide");const l=document.querySelector("#edit-form");return l&&l.remove(),!0},removeTodo:function(t){document.getElementById(t).remove()}};class i{#t=[];#e=0;constructor(t){this.title=t,this.#e="id"+Math.random().toString(16).slice(2),d.appendProject(this),i.setActive(this)}addTodo(t){this.#t.push(t),d.appendTodo(t)}removeTodo(t){this.#t.splice(this.#t.findIndex((e=>e.id===t)),1),d.removeTodo(t)}getTodo(t){return this.#t.find((e=>e.id===t))}get id(){return this.#e}static setActive(t){i.#o=t,d.setActiveProject(t)}get todos(){return[...this.#t]}static#o;static get active(){return i.#o}}class s{checked=!1;#e=null;#d=null;constructor(t,e,o,d){this.title=t,this.description=e,this.priority=o,this.dueDate=d,this.#e="id"+Math.random().toString(16).slice(2),this.#d=i.active}edit(t,e,o,i){this.title=t,this.description=e,this.priority=o,this.dueDate=i,d.editTodo(this)}delete(){this.#d.removeTodo(this.#e)}get id(){return this.#e}}!function(){const t=new i("Today"),e=new s("Go out with trash","this is some randome not so short description",1,new Date),o=new s("Go shopping","this is some randome longer description about how awesome is this todo",0,new Date);t.addTodo(e),t.addTodo(o),[].push(t)}();const c=document.querySelector(".add-task"),n=document.querySelector(".todo-form"),r=document.querySelector(".todos");c.addEventListener("click",d.toggleTodoAddForm),n.querySelector(".close-form").addEventListener("click",d.toggleTodoAddForm),n.addEventListener("submit",(t=>{t.preventDefault();const[e,o,c,r]=[n.title.value,n.description.value,n.priority.value,n.dueDate.value],a=new s(e,o,c,r);i.active.addTodo(a),n.reset(),d.toggleTodoAddForm()})),r.addEventListener("click",(t=>{const e=t.target,o=e.closest(".todo"),s=i.active.getTodo(o.id);if(!o)return null;"checkbox"===e.type&&(s.checked=e.checked),e.closest(".todo-body")&&d.createEditForm(s),e.classList.contains("mdi-trash-can-outline")&&s.delete()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSUssTUFHUkYsRUFBU1gsUUFBUVksR0FDakJELEVBQVNYLFFBQVFjLEdBbEJBLEdBb0JSYixLQUFLVSxFQUNsQixDQ3BCQUksR0FHQSxNQUFNQyxFQUFVakYsU0FBU1ksY0FBYyxhQUNqQ1csRUFBV3ZCLFNBQVNZLGNBQWMsY0FDbENzRSxFQUFpQmxGLFNBQVNZLGNBQWMsVUFHOUNxRSxFQUFRbkMsaUJBQ0osUUFDQWlCLEVBQWtCMUMsbUJBR3RCRSxFQUNLWCxjQUFjLGVBQ2RrQyxpQkFBaUIsUUFBU2lCLEVBQWtCMUMsbUJBRWpERSxFQUFTdUIsaUJBQWlCLFVBQVdDLElBQ2pDQSxFQUFJQyxpQkFDSixNQUFPckQsRUFBT0MsRUFBYUMsRUFBVUMsR0FBVyxDQUM1Q3lCLEVBQVM1QixNQUFNaUQsTUFDZnJCLEVBQVMzQixZQUFZZ0QsTUFDckJyQixFQUFTMUIsU0FBUytDLE1BQ2xCckIsRUFBU3pCLFFBQVE4QyxPQUdmbkQsRUFBTyxJQUFJZ0YsRUFBSzlFLEVBQU9DLEVBQWFDLEVBQVVDLEdBQ3BEMEQsRUFBUWdCLE9BQU9QLFFBQVF4RSxHQUN2QjhCLEVBQVNDLFFBQ1R1QyxFQUFrQjFDLG1CQUFtQixJQUd6QzZELEVBQWVwQyxpQkFBaUIsU0FBVUMsSUFDdEMsTUFBTW9DLEVBQUlwQyxFQUFJcUMsT0FDUjFGLEVBQVV5RixFQUFFRSxRQUFRLFNBQ3BCNUYsRUFBTytELEVBQVFnQixPQUFPSCxRQUFRM0UsRUFBUUssSUFDNUMsSUFBS0wsRUFDRCxPQUFPLEtBR0ksYUFBWHlGLEVBQUU5RSxPQUNGWixFQUFLaUYsUUFBVVMsRUFBRVQsU0FFakJTLEVBQUVFLFFBQVEsZUFDVnRCLEVBQWtCeEIsZUFBZTlDLEdBRWpDMEYsRUFBRWpGLFVBQVVvRixTQUFTLDBCQUNyQjdGLEVBQUtrRixRQUNULEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vZGluLXRvZG8tbWFuYWdlci8uL3NyYy9kaXNwbGF5Q29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbWFuYWdlci8uL3NyYy9wcm9qZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1tYW5hZ2VyLy4vc3JjL3RvZG8uanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLW1hbmFnZXIvLi9zcmMvbG9hZEluaXQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLW1hbmFnZXIvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gYXBwZW5kUHJvamVjdChwcm9qZWN0KSB7XG4gICAgY29uc3QgcHJvamVjdERPTSA9IF9jcmVhdGVQcm9qZWN0KHByb2plY3QpO1xuICAgIGNvbnN0IHByb2plY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0c1wiKTtcbiAgICBwcm9qZWN0cy5hcHBlbmRDaGlsZChwcm9qZWN0RE9NKTtcbn1cblxuZnVuY3Rpb24gX2NyZWF0ZVByb2plY3QocHJvamVjdCkge1xuICAgIGNvbnN0IHsgdGl0bGUsIGlkIH0gPSBwcm9qZWN0O1xuICAgIGNvbnN0IHByb2plY3RET00gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgcHJvamVjdERPTS5jbGFzc0xpc3QuYWRkKFwicHJvamVjdFwiKTtcbiAgICBwcm9qZWN0RE9NLmlkID0gaWQ7XG5cbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIHByb2plY3ROYW1lLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LW5hbWVcIik7XG4gICAgcHJvamVjdE5hbWUudGV4dENvbnRlbnQgPSB0aXRsZTtcblxuICAgIGNvbnN0IGRlbGV0ZUljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGRlbGV0ZUljb24uY2xhc3NMaXN0LmFkZChcIm1kaVwiKTtcbiAgICBkZWxldGVJY29uLmNsYXNzTGlzdC5hZGQoXCJtZGktdHJhc2gtY2FuLW91dGxpbmVcIik7XG5cbiAgICBwcm9qZWN0RE9NLmFwcGVuZENoaWxkKHByb2plY3ROYW1lKTtcbiAgICBwcm9qZWN0RE9NLmFwcGVuZENoaWxkKGRlbGV0ZUljb24pO1xuXG4gICAgcmV0dXJuIHByb2plY3RET007XG59XG5cbmZ1bmN0aW9uIHNldEFjdGl2ZVByb2plY3QocHJvamVjdCkge1xuICAgIF9yZW1vdmVBY3RpdmVQcm9qZWN0KCk7XG4gICAgY29uc3QgcHJvamVjdERPTSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHByb2plY3QuaWQpO1xuICAgIHByb2plY3RET00uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgICBfc2hvd1Byb2plY3RUb2Rvcyhwcm9qZWN0KTtcbn1cblxuZnVuY3Rpb24gX3JlbW92ZUFjdGl2ZVByb2plY3QoKSB7XG4gICAgY29uc3QgYWN0aXZlUHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC5hY3RpdmVcIik7XG4gICAgaWYgKCFhY3RpdmVQcm9qZWN0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWN0aXZlUHJvamVjdC5jbGFzc0xpc3QucmVtb3ZlKFwiLmF0aXZlXCIpO1xuICAgIF9yZW1vdmVDdXJyZW50VG9kb3MoKTtcbn1cblxuZnVuY3Rpb24gX3JlbW92ZUN1cnJlbnRUb2RvcygpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9zXCIpO1xuICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xufVxuXG5mdW5jdGlvbiBfc2hvd1Byb2plY3RUb2Rvcyhwcm9qZWN0KSB7XG4gICAgY29uc3QgdG9kb3MgPSBwcm9qZWN0LnRvZG9zO1xuICAgIHRvZG9zLmZvckVhY2goYXBwZW5kVG9kbyk7XG59XG5cbmZ1bmN0aW9uIGFwcGVuZFRvZG8odG9kbykge1xuICAgIGNvbnN0IHRvZG9ET00gPSBfY3JlYXRlVG9kbyh0b2RvKTtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9zXCIpO1xuXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRvZG9ET00pO1xufVxuXG5mdW5jdGlvbiBfY3JlYXRlVG9kbyh0b2RvKSB7XG4gICAgY29uc3QgeyB0aXRsZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5LCBkdWVEYXRlLCBpZCB9ID0gdG9kbztcbiAgICBjb25zdCB0b2RvRE9NID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0b2RvRE9NLmNsYXNzTGlzdC5hZGQoXCJ0b2RvXCIpO1xuXG4gICAgY29uc3QgcHJpb3JpdHlET00gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgcHJpb3JpdHlET00udHlwZSA9IFwiY2hlY2tib3hcIjtcbiAgICBwcmlvcml0eURPTS5jbGFzc0xpc3QuYWRkKFwicHJpb3JpdHlcIik7XG4gICAgX3NldFByaW9yaXR5KHByaW9yaXR5RE9NLCBwcmlvcml0eSk7XG5cbiAgICBjb25zdCB0b2RvQm9keSA9IF9jcmVhdGVUb2RvQm9keSh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUpO1xuXG4gICAgY29uc3QgZGVsZXRlSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgZGVsZXRlSWNvbi5jbGFzc0xpc3QuYWRkKFwibWRpXCIpO1xuICAgIGRlbGV0ZUljb24uY2xhc3NMaXN0LmFkZChcIm1kaS10cmFzaC1jYW4tb3V0bGluZVwiKTtcblxuICAgIHRvZG9ET00uYXBwZW5kQ2hpbGQocHJpb3JpdHlET00pO1xuICAgIHRvZG9ET00uYXBwZW5kQ2hpbGQodG9kb0JvZHkpO1xuICAgIHRvZG9ET00uYXBwZW5kQ2hpbGQoZGVsZXRlSWNvbik7XG5cbiAgICB0b2RvRE9NLmlkID0gaWQ7XG5cbiAgICByZXR1cm4gdG9kb0RPTTtcbn1cblxuZnVuY3Rpb24gdG9nZ2xlVG9kb0FkZEZvcm0oKSB7XG4gICAgY29uc3QgYWRkVGFzayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXRhc2tcIik7XG4gICAgYWRkVGFzay5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZVwiKTtcblxuICAgIGNvbnN0IHRvZG9Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0b2RvLWZvcm1cIik7XG4gICAgdG9kb0Zvcm0ucmVzZXQoKTtcbiAgICB0b2RvRm9ybS5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZVwiKTtcbn1cblxuZnVuY3Rpb24gX2Nsb25lVG9kb0Zvcm0oKSB7XG4gICAgY29uc3QgdG9kb0Zvcm0gPSBkb2N1bWVudFxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIiN0b2RvLWZvcm1cIilcbiAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICB0b2RvRm9ybS5pZCA9IFwiZWRpdC1mb3JtXCI7XG4gICAgdG9kb0Zvcm0ucmVzZXQoKTtcbiAgICB0b2RvRm9ybS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcblxuICAgIHJldHVybiB0b2RvRm9ybTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRWRpdEZvcm0odG9kbykge1xuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtZm9ybVwiKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgeyB0aXRsZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5LCBkdWVEYXRlLCBpZCB9ID0gdG9kbztcbiAgICBjb25zdCB0b2RvRE9NID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodG9kby5pZCk7XG4gICAgY29uc3QgZWRpdEZvcm0gPSBfY2xvbmVUb2RvRm9ybSgpO1xuXG4gICAgZWRpdEZvcm0uZGF0YXNldC5pZCA9IGlkO1xuICAgIGVkaXRGb3JtLnRpdGxlLnZhbHVlID0gdGl0bGU7XG4gICAgZWRpdEZvcm0uZGVzY3JpcHRpb24udmFsdWUgPSBkZXNjcmlwdGlvbjtcbiAgICBlZGl0Rm9ybS5wcmlvcml0eS52YWx1ZSA9IHByaW9yaXR5O1xuICAgIGlmIChkdWVEYXRlKSB7XG4gICAgICAgIGVkaXRGb3JtLmR1ZURhdGUudmFsdWVBc0RhdGUgPSBkdWVEYXRlO1xuICAgIH1cblxuICAgIGVkaXRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgIFwic3VibWl0XCIsXG4gICAgICAgIChldnQpID0+IHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc3QgW3RpdGxlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHksIGR1ZURhdGVdID0gW1xuICAgICAgICAgICAgICAgIGVkaXRGb3JtLnRpdGxlLnZhbHVlLFxuICAgICAgICAgICAgICAgIGVkaXRGb3JtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAgICAgICAgICAgIGVkaXRGb3JtLnByaW9yaXR5LnZhbHVlLFxuICAgICAgICAgICAgICAgIGVkaXRGb3JtLmR1ZURhdGUudmFsdWVBc0RhdGUsXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgdG9kby5lZGl0KHRpdGxlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHksIGR1ZURhdGUpO1xuICAgICAgICB9LFxuICAgICAgICB7IG9uY2U6IHRydWUgfVxuICAgICk7XG5cbiAgICBlZGl0Rm9ybS5xdWVyeVNlbGVjdG9yKFwiLmNsb3NlLWZvcm1cIikuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgXCJjbGlja1wiLFxuICAgICAgICAoZSkgPT4ge1xuICAgICAgICAgICAgZWRpdEZvcm0ucmVtb3ZlKCk7XG4gICAgICAgICAgICB0b2RvRE9NLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlXCIpO1xuICAgICAgICB9LFxuICAgICAgICB7IG9uY2U6IHRydWUgfVxuICAgICk7XG5cbiAgICB0b2RvRE9NLmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyZW5kXCIsIGVkaXRGb3JtKTtcbiAgICB0b2RvRE9NLmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xuXG4gICAgcmV0dXJuIGVkaXRGb3JtO1xufVxuXG5mdW5jdGlvbiBlZGl0VG9kbyh0b2RvKSB7XG4gICAgY29uc3QgeyB0aXRsZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5LCBpZCwgZHVlRGF0ZSB9ID0gdG9kbztcblxuICAgIGNvbnN0IHRvZG9ET00gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgX3NldFByaW9yaXR5KHRvZG9ET00ucXVlcnlTZWxlY3RvcihcIi5wcmlvcml0eVwiKSwgcHJpb3JpdHkpO1xuICAgIGNvbnN0IHRvZG9Cb2R5ID0gX2NyZWF0ZVRvZG9Cb2R5KHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSk7XG4gICAgdG9kb0RPTS5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tYm9keVwiKS5yZXBsYWNlV2l0aCh0b2RvQm9keSk7XG5cbiAgICB0b2RvRE9NLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlXCIpO1xuICAgIGNvbnN0IGVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LWZvcm1cIik7XG4gICAgZWRpdEZvcm0gJiYgZWRpdEZvcm0ucmVtb3ZlKCk7XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVRvZG8oaWQpIHtcbiAgICBjb25zdCB0b2RvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgIHRvZG8ucmVtb3ZlKCk7XG59XG5cbmZ1bmN0aW9uIF9jcmVhdGVUb2RvQm9keSh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUpIHtcbiAgICBjb25zdCB0b2RvQm9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdG9kb0JvZHkuY2xhc3NMaXN0LmFkZChcInRvZG8tYm9keVwiKTtcblxuICAgIGNvbnN0IHRvZG9UaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdG9kb1RpdGxlLmNsYXNzTGlzdC5hZGQoXCJ0b2RvLXRpdGxlXCIpO1xuICAgIHRvZG9UaXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xuXG4gICAgdG9kb0JvZHkuYXBwZW5kQ2hpbGQodG9kb1RpdGxlKTtcblxuICAgIGlmIChkZXNjcmlwdGlvbikge1xuICAgICAgICBjb25zdCB0b2RvRGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0b2RvRGVzY3JpcHRpb24uY2xhc3NMaXN0LmFkZChcInRvZG8tZGVzY3JpcHRpb25cIik7XG4gICAgICAgIHRvZG9EZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9XG4gICAgICAgICAgICBkZXNjcmlwdGlvbi5zdWJzdHIoMCwgNTApICtcbiAgICAgICAgICAgIChkZXNjcmlwdGlvbi5sZW5ndGggPiA1MCA/IFwiLi4uXCIgOiBcIlwiKTtcblxuICAgICAgICB0b2RvQm9keS5hcHBlbmRDaGlsZCh0b2RvRGVzY3JpcHRpb24pO1xuICAgIH1cbiAgICBpZiAoZHVlRGF0ZSkge1xuICAgICAgICBjb25zdCB0b2RvRHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRvZG9EdWVEYXRlLmNsYXNzTGlzdC5hZGQoXCJ0b2RvLWR1ZS1kYXRlXCIpO1xuXG4gICAgICAgIGNvbnN0IGNhbGVuZGFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgY2FsZW5kYXIuY2xhc3NMaXN0LmFkZChcIm1kaVwiKTtcbiAgICAgICAgY2FsZW5kYXIuY2xhc3NMaXN0LmFkZChcIm1kaS1jYWxlbmRhci1jbG9jay1vdXRsaW5lXCIpO1xuXG4gICAgICAgIGNvbnN0IHRvZG9EYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdG9kb0RhdGUuY2xhc3NMaXN0LmFkZChcInRvZG8tZGF0ZVwiKTtcbiAgICAgICAgdG9kb0RhdGUudGV4dENvbnRlbnQgPSBkdWVEYXRlO1xuXG4gICAgICAgIHRvZG9EdWVEYXRlLmFwcGVuZENoaWxkKGNhbGVuZGFyKTtcbiAgICAgICAgdG9kb0R1ZURhdGUuYXBwZW5kQ2hpbGQodG9kb0RhdGUpO1xuXG4gICAgICAgIHRvZG9Cb2R5LmFwcGVuZENoaWxkKHRvZG9EdWVEYXRlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9zZXRQcmlvcml0eShwcmlvcml0eURPTSwgcHJpb3JpdHkpIHtcbiAgICBzd2l0Y2ggKCtwcmlvcml0eSkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBwcmlvcml0eURPTS5jbGFzc0xpc3QuYWRkKFwicHJpb3JpdHktbG93XCIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHByaW9yaXR5RE9NLmNsYXNzTGlzdC5hZGQoXCJwcmlvcml0eS1tZWRpdW1cIik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcHJpb3JpdHlET00uY2xhc3NMaXN0LmFkZChcInByaW9yaXR5LWhpZ2hcIik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHByaW9yaXR5RE9NLmNsYXNzTGlzdC5hZGQoXCJwcmlvcml0eS1sb3dcIik7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICB0b2dnbGVUb2RvQWRkRm9ybSxcbiAgICBhcHBlbmRQcm9qZWN0LFxuICAgIHNldEFjdGl2ZVByb2plY3QsXG4gICAgYXBwZW5kVG9kbyxcbiAgICBjcmVhdGVFZGl0Rm9ybSxcbiAgICBlZGl0VG9kbyxcbiAgICByZW1vdmVUb2RvLFxufTtcbiIsImltcG9ydCBkaXNwbGF5Q29udHJvbGxlciBmcm9tIFwiLi9kaXNwbGF5Q29udHJvbGxlci5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9qZWN0IHtcbiAgICAjdG9kb3MgPSBbXTtcbiAgICAjaWQgPSAwO1xuICAgIGNvbnN0cnVjdG9yKHRpdGxlKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy4jaWQgPSBcImlkXCIgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KS5zbGljZSgyKTtcbiAgICAgICAgZGlzcGxheUNvbnRyb2xsZXIuYXBwZW5kUHJvamVjdCh0aGlzKTtcbiAgICAgICAgUHJvamVjdC5zZXRBY3RpdmUodGhpcyk7XG4gICAgfVxuXG4gICAgYWRkVG9kbyh0b2RvKSB7XG4gICAgICAgIHRoaXMuI3RvZG9zLnB1c2godG9kbyk7XG4gICAgICAgIGRpc3BsYXlDb250cm9sbGVyLmFwcGVuZFRvZG8odG9kbyk7XG4gICAgfVxuXG4gICAgcmVtb3ZlVG9kbyhpZCkge1xuICAgICAgICB0aGlzLiN0b2Rvcy5zcGxpY2UoXG4gICAgICAgICAgICB0aGlzLiN0b2Rvcy5maW5kSW5kZXgoKHRvZG8pID0+IHRvZG8uaWQgPT09IGlkKSxcbiAgICAgICAgICAgIDFcbiAgICAgICAgKTtcbiAgICAgICAgZGlzcGxheUNvbnRyb2xsZXIucmVtb3ZlVG9kbyhpZCk7XG4gICAgfVxuXG4gICAgZ2V0VG9kbyhpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jdG9kb3MuZmluZCgodG9kbykgPT4gdG9kby5pZCA9PT0gaWQpO1xuICAgIH1cblxuICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2lkO1xuICAgIH1cblxuICAgIHN0YXRpYyBzZXRBY3RpdmUocHJvamVjdCkge1xuICAgICAgICBQcm9qZWN0LiNhY3RpdmUgPSBwcm9qZWN0O1xuICAgICAgICBkaXNwbGF5Q29udHJvbGxlci5zZXRBY3RpdmVQcm9qZWN0KHByb2plY3QpO1xuICAgIH1cblxuICAgIGdldCB0b2RvcygpIHtcbiAgICAgICAgcmV0dXJuIFsuLi50aGlzLiN0b2Rvc107XG4gICAgfVxuXG4gICAgc3RhdGljICNhY3RpdmU7XG4gICAgc3RhdGljIGdldCBhY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiBQcm9qZWN0LiNhY3RpdmU7XG4gICAgfVxufVxuIiwiaW1wb3J0IGRpc3BsYXlDb250cm9sbGVyIGZyb20gXCIuL2Rpc3BsYXlDb250cm9sbGVyXCI7XG5pbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9wcm9qZWN0XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRvZG8ge1xuICAgIGNoZWNrZWQgPSBmYWxzZTtcbiAgICAjaWQgPSBudWxsO1xuICAgICNwcm9qZWN0ID0gbnVsbDtcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5LCBkdWVEYXRlKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgICAgIHRoaXMuI2lkID0gXCJpZFwiICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygxNikuc2xpY2UoMik7XG4gICAgICAgIHRoaXMuI3Byb2plY3QgPSBQcm9qZWN0LmFjdGl2ZTtcbiAgICB9XG5cbiAgICBlZGl0KHRpdGxlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHksIGR1ZURhdGUpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICAgICAgZGlzcGxheUNvbnRyb2xsZXIuZWRpdFRvZG8odGhpcyk7XG4gICAgfVxuXG4gICAgZGVsZXRlKCkge1xuICAgICAgICB0aGlzLiNwcm9qZWN0LnJlbW92ZVRvZG8odGhpcy4jaWQpO1xuICAgIH1cblxuICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2lkO1xuICAgIH1cbn1cbiIsImltcG9ydCBQcm9qZWN0IGZyb20gXCIuL3Byb2plY3RcIjtcbmltcG9ydCBUb2RvIGZyb20gXCIuL3RvZG9cIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5pdFBhZ2UoKSB7XG4gICAgY29uc3QgcHJvamVjdHMgPSBbXTtcblxuICAgIGNvbnN0IHByb2plY3QxID0gbmV3IFByb2plY3QoXCJUb2RheVwiKTtcblxuICAgIGNvbnN0IHRvZG8xMSA9IG5ldyBUb2RvKFxuICAgICAgICBcIkdvIG91dCB3aXRoIHRyYXNoXCIsXG4gICAgICAgIFwidGhpcyBpcyBzb21lIHJhbmRvbWUgbm90IHNvIHNob3J0IGRlc2NyaXB0aW9uXCIsXG4gICAgICAgIDEsXG4gICAgICAgIG5ldyBEYXRlKClcbiAgICApO1xuICAgIGNvbnN0IHRvZG8xMiA9IG5ldyBUb2RvKFxuICAgICAgICBcIkdvIHNob3BwaW5nXCIsXG4gICAgICAgIFwidGhpcyBpcyBzb21lIHJhbmRvbWUgbG9uZ2VyIGRlc2NyaXB0aW9uIGFib3V0IGhvdyBhd2Vzb21lIGlzIHRoaXMgdG9kb1wiLFxuICAgICAgICAwLFxuICAgICAgICBuZXcgRGF0ZSgpXG4gICAgKTtcblxuICAgIHByb2plY3QxLmFkZFRvZG8odG9kbzExKTtcbiAgICBwcm9qZWN0MS5hZGRUb2RvKHRvZG8xMik7XG5cbiAgICBwcm9qZWN0cy5wdXNoKHByb2plY3QxKTtcbn1cbiIsImltcG9ydCBkaXNwbGF5Q29udHJvbGxlciBmcm9tIFwiLi9kaXNwbGF5Q29udHJvbGxlclwiO1xuaW1wb3J0IGluaXRQYWdlIGZyb20gXCIuL2xvYWRJbml0XCI7XG5pbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9wcm9qZWN0XCI7XG5pbXBvcnQgVG9kbyBmcm9tIFwiLi90b2RvXCI7XG5cbmluaXRQYWdlKCk7XG5cbi8qIEVMRU1FTlRTICovXG5jb25zdCBhZGRUYXNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFza1wiKTtcbmNvbnN0IHRvZG9Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWZvcm1cIik7XG5jb25zdCB0b2Rvc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb3NcIik7XG5cbi8qIExJU1RFTkVSUyAqL1xuYWRkVGFzay5hZGRFdmVudExpc3RlbmVyKFxuICAgIFwiY2xpY2tcIixcbiAgICBkaXNwbGF5Q29udHJvbGxlci50b2dnbGVUb2RvQWRkRm9ybVxuKTtcblxudG9kb0Zvcm1cbiAgICAucXVlcnlTZWxlY3RvcihcIi5jbG9zZS1mb3JtXCIpXG4gICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkaXNwbGF5Q29udHJvbGxlci50b2dnbGVUb2RvQWRkRm9ybSk7XG5cbnRvZG9Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IFt0aXRsZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5LCBkdWVEYXRlXSA9IFtcbiAgICAgICAgdG9kb0Zvcm0udGl0bGUudmFsdWUsXG4gICAgICAgIHRvZG9Gb3JtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAgICB0b2RvRm9ybS5wcmlvcml0eS52YWx1ZSxcbiAgICAgICAgdG9kb0Zvcm0uZHVlRGF0ZS52YWx1ZSxcbiAgICBdO1xuXG4gICAgY29uc3QgdG9kbyA9IG5ldyBUb2RvKHRpdGxlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHksIGR1ZURhdGUpO1xuICAgIFByb2plY3QuYWN0aXZlLmFkZFRvZG8odG9kbyk7XG4gICAgdG9kb0Zvcm0ucmVzZXQoKTtcbiAgICBkaXNwbGF5Q29udHJvbGxlci50b2dnbGVUb2RvQWRkRm9ybSgpO1xufSk7XG5cbnRvZG9zQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgY29uc3QgdCA9IGV2dC50YXJnZXQ7XG4gICAgY29uc3QgdG9kb0RPTSA9IHQuY2xvc2VzdChcIi50b2RvXCIpO1xuICAgIGNvbnN0IHRvZG8gPSBQcm9qZWN0LmFjdGl2ZS5nZXRUb2RvKHRvZG9ET00uaWQpO1xuICAgIGlmICghdG9kb0RPTSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodC50eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgdG9kby5jaGVja2VkID0gdC5jaGVja2VkO1xuICAgIH1cbiAgICBpZiAodC5jbG9zZXN0KFwiLnRvZG8tYm9keVwiKSkge1xuICAgICAgICBkaXNwbGF5Q29udHJvbGxlci5jcmVhdGVFZGl0Rm9ybSh0b2RvKTtcbiAgICB9XG4gICAgaWYgKHQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibWRpLXRyYXNoLWNhbi1vdXRsaW5lXCIpKSB7XG4gICAgICAgIHRvZG8uZGVsZXRlKCk7XG4gICAgfVxufSk7XG4iXSwibmFtZXMiOlsiYXBwZW5kVG9kbyIsInRvZG8iLCJ0b2RvRE9NIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInByaW9yaXR5IiwiZHVlRGF0ZSIsImlkIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwicHJpb3JpdHlET00iLCJ0eXBlIiwiX3NldFByaW9yaXR5IiwidG9kb0JvZHkiLCJfY3JlYXRlVG9kb0JvZHkiLCJkZWxldGVJY29uIiwiYXBwZW5kQ2hpbGQiLCJfY3JlYXRlVG9kbyIsInF1ZXJ5U2VsZWN0b3IiLCJ0b2RvVGl0bGUiLCJ0ZXh0Q29udGVudCIsInRvZG9EZXNjcmlwdGlvbiIsInN1YnN0ciIsImxlbmd0aCIsInRvZG9EdWVEYXRlIiwiY2FsZW5kYXIiLCJ0b2RvRGF0ZSIsInRvZ2dsZVRvZG9BZGRGb3JtIiwidG9nZ2xlIiwidG9kb0Zvcm0iLCJyZXNldCIsImFwcGVuZFByb2plY3QiLCJwcm9qZWN0IiwicHJvamVjdERPTSIsInByb2plY3ROYW1lIiwiX2NyZWF0ZVByb2plY3QiLCJzZXRBY3RpdmVQcm9qZWN0IiwiYWN0aXZlUHJvamVjdCIsInJlbW92ZSIsImlubmVySFRNTCIsIl9yZW1vdmVBY3RpdmVQcm9qZWN0IiwiZ2V0RWxlbWVudEJ5SWQiLCJ0b2RvcyIsImZvckVhY2giLCJfc2hvd1Byb2plY3RUb2RvcyIsImNyZWF0ZUVkaXRGb3JtIiwiZWRpdEZvcm0iLCJjbG9uZU5vZGUiLCJfY2xvbmVUb2RvRm9ybSIsImRhdGFzZXQiLCJ2YWx1ZSIsInZhbHVlQXNEYXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiZWRpdCIsIm9uY2UiLCJlIiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwiZWRpdFRvZG8iLCJyZXBsYWNlV2l0aCIsInJlbW92ZVRvZG8iLCJQcm9qZWN0IiwiY29uc3RydWN0b3IiLCJ0aGlzIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic2xpY2UiLCJkaXNwbGF5Q29udHJvbGxlciIsInNldEFjdGl2ZSIsImFkZFRvZG8iLCJwdXNoIiwic3BsaWNlIiwiZmluZEluZGV4IiwiZ2V0VG9kbyIsImZpbmQiLCJzdGF0aWMiLCJhY3RpdmUiLCJUb2RvIiwiY2hlY2tlZCIsImRlbGV0ZSIsInByb2plY3QxIiwidG9kbzExIiwiRGF0ZSIsInRvZG8xMiIsImluaXRQYWdlIiwiYWRkVGFzayIsInRvZG9zQ29udGFpbmVyIiwidCIsInRhcmdldCIsImNsb3Nlc3QiLCJjb250YWlucyJdLCJzb3VyY2VSb290IjoiIn0=