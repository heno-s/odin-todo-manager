(()=>{"use strict";function t(t){const d=function(t){const{title:d,description:i,priority:s,dueDate:c,id:n}=t,r=document.createElement("div");r.classList.add("todo");const a=document.createElement("input");a.type="checkbox",a.classList.add("priority"),o(a,s);const l=e(d,i,c),u=document.createElement("div");return u.classList.add("mdi"),u.classList.add("mdi-trash-can-outline"),console.log(l),r.appendChild(a),r.appendChild(l),r.appendChild(u),r.id=n,r}(t);document.querySelector(".todos").appendChild(d)}function e(t,e,o){const d=document.createElement("div");d.classList.add("todo-body");const i=document.createElement("div");if(i.classList.add("todo-title"),i.textContent=t,d.appendChild(i),e){const t=document.createElement("div");t.classList.add("todo-description"),t.textContent=e.substr(0,50)+(e.length>50?"...":""),d.appendChild(t)}if(o){const t=document.createElement("div");t.classList.add("todo-due-date");const e=document.createElement("div");e.classList.add("mdi"),e.classList.add("mdi-calendar-clock-outline");const i=document.createElement("div");i.classList.add("todo-date"),i.textContent=o,t.appendChild(e),t.appendChild(i),d.appendChild(t)}return d}function o(t,e){switch(+e){case 0:default:t.classList.add("priority-low");break;case 1:t.classList.add("priority-medium");break;case 2:t.classList.add("priority-high")}}const d={toggleTodoAddForm:function(){document.querySelector(".add-task").classList.toggle("hide");const t=document.querySelector("#todo-form");t.reset(),t.classList.toggle("hide")},appendProject:function(t){const e=function(t){const{title:e,id:o}=t,d=document.createElement("li");d.classList.add("project"),d.id=o;const i=document.createElement("span");i.classList.add("project-name"),i.textContent=e;const s=document.createElement("div");return s.classList.add("mdi"),s.classList.add("mdi-trash-can-outline"),d.appendChild(i),d.appendChild(s),d}(t);document.querySelector(".projects").appendChild(e)},setActiveProject:function(e){!function(){const t=document.querySelector(".project.active");t&&(t.classList.remove(".ative"),document.querySelector(".todos").innerHTML="")}(),document.getElementById(e.id).classList.add("active"),function(e){e.todos.forEach(t)}(e)},appendTodo:t,createEditForm:function(t){if(document.querySelector("#edit-form"))return null;const{title:e,description:o,priority:d,dueDate:i,id:s}=t,c=document.getElementById(t.id),n=function(){const t=document.querySelector("#todo-form").cloneNode(!0);return t.id="edit-form",t.reset(),t.classList.remove("hide"),t}();return n.dataset.id=s,n.title.value=e,n.description.value=o,n.priority.value=d,i&&(n.dueDate.valueAsDate=i),n.addEventListener("submit",(e=>{e.preventDefault();const[o,d,i,s]=[n.title.value,n.description.value,n.priority.value,n.dueDate.valueAsDate];t.edit(o,d,i,s)}),{once:!0}),n.querySelector(".close-form").addEventListener("click",(t=>{n.remove(),c.classList.remove("hide")}),{once:!0}),c.insertAdjacentElement("afterend",n),c.classList.add("hide"),n},editTodo:function(t){const{title:d,description:i,priority:s,id:c,dueDate:n}=t,r=document.getElementById(c);o(r.querySelector(".priority"),s);const a=e(d,i,n);r.querySelector(".todo-body").replaceWith(a),r.classList.remove("hide");const l=document.querySelector("#edit-form");return l&&l.remove(),!0},removeTodo:function(t){document.getElementById(t).remove()}};class i{#t=[];#e=0;constructor(t){this.title=t,this.#e="id"+Math.random().toString(16).slice(2),d.appendProject(this),i.setActive(this)}addTodo(t){this.#t.push(t),d.appendTodo(t)}removeTodo(t){this.#t.splice(this.#t.findIndex((e=>e.id===t)),1),d.removeTodo(t)}getTodo(t){return this.#t.find((e=>e.id===t))}get id(){return this.#e}static setActive(t){i.#o=t,d.setActiveProject(t)}get todos(){return[...this.#t]}static#o;static get active(){return i.#o}}class s{checked=!1;#e=null;#d=null;constructor(t,e,o,d){this.title=t,this.description=e,this.priority=o,this.dueDate=d,this.#e="id"+Math.random().toString(16).slice(2),this.#d=i.active}edit(t,e,o,i){this.title=t,this.description=e,this.priority=o,this.dueDate=i,d.editTodo(this)}delete(){this.#d.removeTodo(this.#e)}get id(){return this.#e}}!function(){const t=new i("Today"),e=new s("Go out with trash","this is some randome not so short description",1,new Date),o=new s("Go shopping","this is some randome longer description about how awesome is this todo",0,new Date);t.addTodo(e),t.addTodo(o),[].push(t)}();const c=document.querySelector(".add-task"),n=document.querySelector(".todo-form"),r=document.querySelector(".todos");c.addEventListener("click",d.toggleTodoAddForm),n.querySelector(".close-form").addEventListener("click",d.toggleTodoAddForm),n.addEventListener("submit",(t=>{t.preventDefault();const[e,o,c,r]=[n.title.value,n.description.value,n.priority.value,n.dueDate.value],a=new s(e,o,c,r);i.active.addTodo(a),n.reset(),d.toggleTodoAddForm()})),r.addEventListener("click",(t=>{const e=t.target,o=e.closest(".todo"),s=i.active.getTodo(o.id);if(!o)return null;"checkbox"===e.type&&(s.checked=e.checked),e.closest(".todo-body")&&d.createEditForm(s),e.classList.contains("mdi-trash-can-outline")&&s.delete()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBUyxJQUFJTixFQUNmLGNBQ0EseUVBQ0EsRUFDQSxJQUFJSyxNQUdSRixFQUFTWCxRQUFRWSxHQUNqQkQsRUFBU1gsUUFBUWMsR0FsQkEsR0FvQlJiLEtBQUtVLEVBQ2xCLENDcEJBSSxHQUdBLE1BQU1DLEVBQVVuRixTQUFTYyxjQUFjLGFBQ2pDVyxFQUFXekIsU0FBU2MsY0FBYyxjQUNsQ3NFLEVBQWlCcEYsU0FBU2MsY0FBYyxVQUc5Q3FFLEVBQVFuQyxpQkFDSixRQUNBaUIsRUFBa0IxQyxtQkFHdEJFLEVBQ0tYLGNBQWMsZUFDZGtDLGlCQUFpQixRQUFTaUIsRUFBa0IxQyxtQkFFakRFLEVBQVN1QixpQkFBaUIsVUFBV0MsSUFDakNBLEVBQUlDLGlCQUNKLE1BQU92RCxFQUFPQyxFQUFhQyxFQUFVQyxHQUFXLENBQzVDMkIsRUFBUzlCLE1BQU1tRCxNQUNmckIsRUFBUzdCLFlBQVlrRCxNQUNyQnJCLEVBQVM1QixTQUFTaUQsTUFDbEJyQixFQUFTM0IsUUFBUWdELE9BR2ZyRCxFQUFPLElBQUlrRixFQUFLaEYsRUFBT0MsRUFBYUMsRUFBVUMsR0FDcEQ0RCxFQUFRZ0IsT0FBT1AsUUFBUTFFLEdBQ3ZCZ0MsRUFBU0MsUUFDVHVDLEVBQWtCMUMsbUJBQW1CLElBR3pDNkQsRUFBZXBDLGlCQUFpQixTQUFVQyxJQUN0QyxNQUFNb0MsRUFBSXBDLEVBQUlxQyxPQUNSNUYsRUFBVTJGLEVBQUVFLFFBQVEsU0FDcEI5RixFQUFPaUUsRUFBUWdCLE9BQU9ILFFBQVE3RSxFQUFRSyxJQUM1QyxJQUFLTCxFQUNELE9BQU8sS0FHSSxhQUFYMkYsRUFBRWhGLE9BQ0ZaLEVBQUttRixRQUFVUyxFQUFFVCxTQUVqQlMsRUFBRUUsUUFBUSxlQUNWdEIsRUFBa0J4QixlQUFlaEQsR0FFakM0RixFQUFFbkYsVUFBVXNGLFNBQVMsMEJBQ3JCL0YsRUFBS29GLFFBQ1QsRyIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tdG9kby1tYW5hZ2VyLy4vc3JjL2Rpc3BsYXlDb250cm9sbGVyLmpzIiwid2VicGFjazovL29kaW4tdG9kby1tYW5hZ2VyLy4vc3JjL3Byb2plY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLW1hbmFnZXIvLi9zcmMvdG9kby5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbWFuYWdlci8uL3NyYy9sb2FkSW5pdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbWFuYWdlci8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBhcHBlbmRQcm9qZWN0KHByb2plY3QpIHtcbiAgICBjb25zdCBwcm9qZWN0RE9NID0gX2NyZWF0ZVByb2plY3QocHJvamVjdCk7XG4gICAgY29uc3QgcHJvamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RzXCIpO1xuICAgIHByb2plY3RzLmFwcGVuZENoaWxkKHByb2plY3RET00pO1xufVxuXG5mdW5jdGlvbiBfY3JlYXRlUHJvamVjdChwcm9qZWN0KSB7XG4gICAgY29uc3QgeyB0aXRsZSwgaWQgfSA9IHByb2plY3Q7XG4gICAgY29uc3QgcHJvamVjdERPTSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgICBwcm9qZWN0RE9NLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0XCIpO1xuICAgIHByb2plY3RET00uaWQgPSBpZDtcblxuICAgIGNvbnN0IHByb2plY3ROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgcHJvamVjdE5hbWUuY2xhc3NMaXN0LmFkZChcInByb2plY3QtbmFtZVwiKTtcbiAgICBwcm9qZWN0TmFtZS50ZXh0Q29udGVudCA9IHRpdGxlO1xuXG4gICAgY29uc3QgZGVsZXRlSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgZGVsZXRlSWNvbi5jbGFzc0xpc3QuYWRkKFwibWRpXCIpO1xuICAgIGRlbGV0ZUljb24uY2xhc3NMaXN0LmFkZChcIm1kaS10cmFzaC1jYW4tb3V0bGluZVwiKTtcblxuICAgIHByb2plY3RET00uYXBwZW5kQ2hpbGQocHJvamVjdE5hbWUpO1xuICAgIHByb2plY3RET00uYXBwZW5kQ2hpbGQoZGVsZXRlSWNvbik7XG5cbiAgICByZXR1cm4gcHJvamVjdERPTTtcbn1cblxuZnVuY3Rpb24gc2V0QWN0aXZlUHJvamVjdChwcm9qZWN0KSB7XG4gICAgX3JlbW92ZUFjdGl2ZVByb2plY3QoKTtcbiAgICBjb25zdCBwcm9qZWN0RE9NID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJvamVjdC5pZCk7XG4gICAgcHJvamVjdERPTS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgIF9zaG93UHJvamVjdFRvZG9zKHByb2plY3QpO1xufVxuXG5mdW5jdGlvbiBfcmVtb3ZlQWN0aXZlUHJvamVjdCgpIHtcbiAgICBjb25zdCBhY3RpdmVQcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LmFjdGl2ZVwiKTtcbiAgICBpZiAoIWFjdGl2ZVByb2plY3QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhY3RpdmVQcm9qZWN0LmNsYXNzTGlzdC5yZW1vdmUoXCIuYXRpdmVcIik7XG4gICAgX3JlbW92ZUN1cnJlbnRUb2RvcygpO1xufVxuXG5mdW5jdGlvbiBfcmVtb3ZlQ3VycmVudFRvZG9zKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb3NcIik7XG4gICAgY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG59XG5cbmZ1bmN0aW9uIF9zaG93UHJvamVjdFRvZG9zKHByb2plY3QpIHtcbiAgICBjb25zdCB0b2RvcyA9IHByb2plY3QudG9kb3M7XG4gICAgdG9kb3MuZm9yRWFjaChhcHBlbmRUb2RvKTtcbn1cblxuZnVuY3Rpb24gYXBwZW5kVG9kbyh0b2RvKSB7XG4gICAgY29uc3QgdG9kb0RPTSA9IF9jcmVhdGVUb2RvKHRvZG8pO1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb3NcIik7XG5cbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodG9kb0RPTSk7XG59XG5cbmZ1bmN0aW9uIF9jcmVhdGVUb2RvKHRvZG8pIHtcbiAgICBjb25zdCB7IHRpdGxlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHksIGR1ZURhdGUsIGlkIH0gPSB0b2RvO1xuICAgIGNvbnN0IHRvZG9ET00gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRvZG9ET00uY2xhc3NMaXN0LmFkZChcInRvZG9cIik7XG5cbiAgICBjb25zdCBwcmlvcml0eURPTSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBwcmlvcml0eURPTS50eXBlID0gXCJjaGVja2JveFwiO1xuICAgIHByaW9yaXR5RE9NLmNsYXNzTGlzdC5hZGQoXCJwcmlvcml0eVwiKTtcbiAgICBfc2V0UHJpb3JpdHkocHJpb3JpdHlET00sIHByaW9yaXR5KTtcblxuICAgIGNvbnN0IHRvZG9Cb2R5ID0gX2NyZWF0ZVRvZG9Cb2R5KHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSk7XG5cbiAgICBjb25zdCBkZWxldGVJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBkZWxldGVJY29uLmNsYXNzTGlzdC5hZGQoXCJtZGlcIik7XG4gICAgZGVsZXRlSWNvbi5jbGFzc0xpc3QuYWRkKFwibWRpLXRyYXNoLWNhbi1vdXRsaW5lXCIpO1xuICAgIGNvbnNvbGUubG9nKHRvZG9Cb2R5KTtcbiAgICB0b2RvRE9NLmFwcGVuZENoaWxkKHByaW9yaXR5RE9NKTtcbiAgICB0b2RvRE9NLmFwcGVuZENoaWxkKHRvZG9Cb2R5KTtcbiAgICB0b2RvRE9NLmFwcGVuZENoaWxkKGRlbGV0ZUljb24pO1xuXG4gICAgdG9kb0RPTS5pZCA9IGlkO1xuXG4gICAgcmV0dXJuIHRvZG9ET007XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZVRvZG9BZGRGb3JtKCkge1xuICAgIGNvbnN0IGFkZFRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10YXNrXCIpO1xuICAgIGFkZFRhc2suY2xhc3NMaXN0LnRvZ2dsZShcImhpZGVcIik7XG5cbiAgICBjb25zdCB0b2RvRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9kby1mb3JtXCIpO1xuICAgIHRvZG9Gb3JtLnJlc2V0KCk7XG4gICAgdG9kb0Zvcm0uY2xhc3NMaXN0LnRvZ2dsZShcImhpZGVcIik7XG59XG5cbmZ1bmN0aW9uIF9jbG9uZVRvZG9Gb3JtKCkge1xuICAgIGNvbnN0IHRvZG9Gb3JtID0gZG9jdW1lbnRcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIjdG9kby1mb3JtXCIpXG4gICAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdG9kb0Zvcm0uaWQgPSBcImVkaXQtZm9ybVwiO1xuICAgIHRvZG9Gb3JtLnJlc2V0KCk7XG4gICAgdG9kb0Zvcm0uY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIik7XG5cbiAgICByZXR1cm4gdG9kb0Zvcm07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUVkaXRGb3JtKHRvZG8pIHtcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LWZvcm1cIikpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHsgdGl0bGUsIGRlc2NyaXB0aW9uLCBwcmlvcml0eSwgZHVlRGF0ZSwgaWQgfSA9IHRvZG87XG4gICAgY29uc3QgdG9kb0RPTSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRvZG8uaWQpO1xuICAgIGNvbnN0IGVkaXRGb3JtID0gX2Nsb25lVG9kb0Zvcm0oKTtcblxuICAgIGVkaXRGb3JtLmRhdGFzZXQuaWQgPSBpZDtcbiAgICBlZGl0Rm9ybS50aXRsZS52YWx1ZSA9IHRpdGxlO1xuICAgIGVkaXRGb3JtLmRlc2NyaXB0aW9uLnZhbHVlID0gZGVzY3JpcHRpb247XG4gICAgZWRpdEZvcm0ucHJpb3JpdHkudmFsdWUgPSBwcmlvcml0eTtcbiAgICBpZiAoZHVlRGF0ZSkge1xuICAgICAgICBlZGl0Rm9ybS5kdWVEYXRlLnZhbHVlQXNEYXRlID0gZHVlRGF0ZTtcbiAgICB9XG5cbiAgICBlZGl0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICBcInN1Ym1pdFwiLFxuICAgICAgICAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGNvbnN0IFt0aXRsZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5LCBkdWVEYXRlXSA9IFtcbiAgICAgICAgICAgICAgICBlZGl0Rm9ybS50aXRsZS52YWx1ZSxcbiAgICAgICAgICAgICAgICBlZGl0Rm9ybS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgICAgICAgICAgICBlZGl0Rm9ybS5wcmlvcml0eS52YWx1ZSxcbiAgICAgICAgICAgICAgICBlZGl0Rm9ybS5kdWVEYXRlLnZhbHVlQXNEYXRlLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIHRvZG8uZWRpdCh0aXRsZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5LCBkdWVEYXRlKTtcbiAgICAgICAgfSxcbiAgICAgICAgeyBvbmNlOiB0cnVlIH1cbiAgICApO1xuXG4gICAgZWRpdEZvcm0ucXVlcnlTZWxlY3RvcihcIi5jbG9zZS1mb3JtXCIpLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgKGUpID0+IHtcbiAgICAgICAgICAgIGVkaXRGb3JtLnJlbW92ZSgpO1xuICAgICAgICAgICAgdG9kb0RPTS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcbiAgICAgICAgfSxcbiAgICAgICAgeyBvbmNlOiB0cnVlIH1cbiAgICApO1xuXG4gICAgdG9kb0RPTS5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmVuZFwiLCBlZGl0Rm9ybSk7XG4gICAgdG9kb0RPTS5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcblxuICAgIHJldHVybiBlZGl0Rm9ybTtcbn1cblxuZnVuY3Rpb24gZWRpdFRvZG8odG9kbykge1xuICAgIGNvbnN0IHsgdGl0bGUsIGRlc2NyaXB0aW9uLCBwcmlvcml0eSwgaWQsIGR1ZURhdGUgfSA9IHRvZG87XG5cbiAgICBjb25zdCB0b2RvRE9NID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgIF9zZXRQcmlvcml0eSh0b2RvRE9NLnF1ZXJ5U2VsZWN0b3IoXCIucHJpb3JpdHlcIiksIHByaW9yaXR5KTtcbiAgICBjb25zdCB0b2RvQm9keSA9IF9jcmVhdGVUb2RvQm9keSh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUpO1xuICAgIHRvZG9ET00ucXVlcnlTZWxlY3RvcihcIi50b2RvLWJvZHlcIikucmVwbGFjZVdpdGgodG9kb0JvZHkpO1xuXG4gICAgdG9kb0RPTS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcbiAgICBjb25zdCBlZGl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1mb3JtXCIpO1xuICAgIGVkaXRGb3JtICYmIGVkaXRGb3JtLnJlbW92ZSgpO1xuICAgIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVUb2RvKGlkKSB7XG4gICAgY29uc3QgdG9kbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICB0b2RvLnJlbW92ZSgpO1xufVxuXG5mdW5jdGlvbiBfY3JlYXRlVG9kb0JvZHkodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlKSB7XG4gICAgY29uc3QgdG9kb0JvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRvZG9Cb2R5LmNsYXNzTGlzdC5hZGQoXCJ0b2RvLWJvZHlcIik7XG5cbiAgICBjb25zdCB0b2RvVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRvZG9UaXRsZS5jbGFzc0xpc3QuYWRkKFwidG9kby10aXRsZVwiKTtcbiAgICB0b2RvVGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZTtcblxuICAgIHRvZG9Cb2R5LmFwcGVuZENoaWxkKHRvZG9UaXRsZSk7XG5cbiAgICBpZiAoZGVzY3JpcHRpb24pIHtcbiAgICAgICAgY29uc3QgdG9kb0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdG9kb0Rlc2NyaXB0aW9uLmNsYXNzTGlzdC5hZGQoXCJ0b2RvLWRlc2NyaXB0aW9uXCIpO1xuICAgICAgICB0b2RvRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPVxuICAgICAgICAgICAgZGVzY3JpcHRpb24uc3Vic3RyKDAsIDUwKSArXG4gICAgICAgICAgICAoZGVzY3JpcHRpb24ubGVuZ3RoID4gNTAgPyBcIi4uLlwiIDogXCJcIik7XG5cbiAgICAgICAgdG9kb0JvZHkuYXBwZW5kQ2hpbGQodG9kb0Rlc2NyaXB0aW9uKTtcbiAgICB9XG4gICAgaWYgKGR1ZURhdGUpIHtcbiAgICAgICAgY29uc3QgdG9kb0R1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0b2RvRHVlRGF0ZS5jbGFzc0xpc3QuYWRkKFwidG9kby1kdWUtZGF0ZVwiKTtcblxuICAgICAgICBjb25zdCBjYWxlbmRhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGNhbGVuZGFyLmNsYXNzTGlzdC5hZGQoXCJtZGlcIik7XG4gICAgICAgIGNhbGVuZGFyLmNsYXNzTGlzdC5hZGQoXCJtZGktY2FsZW5kYXItY2xvY2stb3V0bGluZVwiKTtcblxuICAgICAgICBjb25zdCB0b2RvRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRvZG9EYXRlLmNsYXNzTGlzdC5hZGQoXCJ0b2RvLWRhdGVcIik7XG4gICAgICAgIHRvZG9EYXRlLnRleHRDb250ZW50ID0gZHVlRGF0ZTtcblxuICAgICAgICB0b2RvRHVlRGF0ZS5hcHBlbmRDaGlsZChjYWxlbmRhcik7XG4gICAgICAgIHRvZG9EdWVEYXRlLmFwcGVuZENoaWxkKHRvZG9EYXRlKTtcblxuICAgICAgICB0b2RvQm9keS5hcHBlbmRDaGlsZCh0b2RvRHVlRGF0ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRvZG9Cb2R5O1xufVxuXG5mdW5jdGlvbiBfc2V0UHJpb3JpdHkocHJpb3JpdHlET00sIHByaW9yaXR5KSB7XG4gICAgc3dpdGNoICgrcHJpb3JpdHkpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcHJpb3JpdHlET00uY2xhc3NMaXN0LmFkZChcInByaW9yaXR5LWxvd1wiKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBwcmlvcml0eURPTS5jbGFzc0xpc3QuYWRkKFwicHJpb3JpdHktbWVkaXVtXCIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHByaW9yaXR5RE9NLmNsYXNzTGlzdC5hZGQoXCJwcmlvcml0eS1oaWdoXCIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBwcmlvcml0eURPTS5jbGFzc0xpc3QuYWRkKFwicHJpb3JpdHktbG93XCIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgdG9nZ2xlVG9kb0FkZEZvcm0sXG4gICAgYXBwZW5kUHJvamVjdCxcbiAgICBzZXRBY3RpdmVQcm9qZWN0LFxuICAgIGFwcGVuZFRvZG8sXG4gICAgY3JlYXRlRWRpdEZvcm0sXG4gICAgZWRpdFRvZG8sXG4gICAgcmVtb3ZlVG9kbyxcbn07XG4iLCJpbXBvcnQgZGlzcGxheUNvbnRyb2xsZXIgZnJvbSBcIi4vZGlzcGxheUNvbnRyb2xsZXIuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvamVjdCB7XG4gICAgI3RvZG9zID0gW107XG4gICAgI2lkID0gMDtcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuI2lkID0gXCJpZFwiICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygxNikuc2xpY2UoMik7XG4gICAgICAgIGRpc3BsYXlDb250cm9sbGVyLmFwcGVuZFByb2plY3QodGhpcyk7XG4gICAgICAgIFByb2plY3Quc2V0QWN0aXZlKHRoaXMpO1xuICAgIH1cblxuICAgIGFkZFRvZG8odG9kbykge1xuICAgICAgICB0aGlzLiN0b2Rvcy5wdXNoKHRvZG8pO1xuICAgICAgICBkaXNwbGF5Q29udHJvbGxlci5hcHBlbmRUb2RvKHRvZG8pO1xuICAgIH1cblxuICAgIHJlbW92ZVRvZG8oaWQpIHtcbiAgICAgICAgdGhpcy4jdG9kb3Muc3BsaWNlKFxuICAgICAgICAgICAgdGhpcy4jdG9kb3MuZmluZEluZGV4KCh0b2RvKSA9PiB0b2RvLmlkID09PSBpZCksXG4gICAgICAgICAgICAxXG4gICAgICAgICk7XG4gICAgICAgIGRpc3BsYXlDb250cm9sbGVyLnJlbW92ZVRvZG8oaWQpO1xuICAgIH1cblxuICAgIGdldFRvZG8oaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3RvZG9zLmZpbmQoKHRvZG8pID0+IHRvZG8uaWQgPT09IGlkKTtcbiAgICB9XG5cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNpZDtcbiAgICB9XG5cbiAgICBzdGF0aWMgc2V0QWN0aXZlKHByb2plY3QpIHtcbiAgICAgICAgUHJvamVjdC4jYWN0aXZlID0gcHJvamVjdDtcbiAgICAgICAgZGlzcGxheUNvbnRyb2xsZXIuc2V0QWN0aXZlUHJvamVjdChwcm9qZWN0KTtcbiAgICB9XG5cbiAgICBnZXQgdG9kb3MoKSB7XG4gICAgICAgIHJldHVybiBbLi4udGhpcy4jdG9kb3NdO1xuICAgIH1cblxuICAgIHN0YXRpYyAjYWN0aXZlO1xuICAgIHN0YXRpYyBnZXQgYWN0aXZlKCkge1xuICAgICAgICByZXR1cm4gUHJvamVjdC4jYWN0aXZlO1xuICAgIH1cbn1cbiIsImltcG9ydCBkaXNwbGF5Q29udHJvbGxlciBmcm9tIFwiLi9kaXNwbGF5Q29udHJvbGxlclwiO1xuaW1wb3J0IFByb2plY3QgZnJvbSBcIi4vcHJvamVjdFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUb2RvIHtcbiAgICBjaGVja2VkID0gZmFsc2U7XG4gICAgI2lkID0gbnVsbDtcbiAgICAjcHJvamVjdCA9IG51bGw7XG4gICAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uLCBwcmlvcml0eSwgZHVlRGF0ZSkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgICAgICB0aGlzLiNpZCA9IFwiaWRcIiArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnNsaWNlKDIpO1xuICAgICAgICB0aGlzLiNwcm9qZWN0ID0gUHJvamVjdC5hY3RpdmU7XG4gICAgfVxuXG4gICAgZWRpdCh0aXRsZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5LCBkdWVEYXRlKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgICAgIGRpc3BsYXlDb250cm9sbGVyLmVkaXRUb2RvKHRoaXMpO1xuICAgIH1cblxuICAgIGRlbGV0ZSgpIHtcbiAgICAgICAgdGhpcy4jcHJvamVjdC5yZW1vdmVUb2RvKHRoaXMuI2lkKTtcbiAgICB9XG5cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNpZDtcbiAgICB9XG59XG4iLCJpbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9wcm9qZWN0XCI7XG5pbXBvcnQgVG9kbyBmcm9tIFwiLi90b2RvXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGluaXRQYWdlKCkge1xuICAgIGNvbnN0IHByb2plY3RzID0gW107XG5cbiAgICBjb25zdCBwcm9qZWN0MSA9IG5ldyBQcm9qZWN0KFwiVG9kYXlcIik7XG5cbiAgICBjb25zdCB0b2RvMTEgPSBuZXcgVG9kbyhcbiAgICAgICAgXCJHbyBvdXQgd2l0aCB0cmFzaFwiLFxuICAgICAgICBcInRoaXMgaXMgc29tZSByYW5kb21lIG5vdCBzbyBzaG9ydCBkZXNjcmlwdGlvblwiLFxuICAgICAgICAxLFxuICAgICAgICBuZXcgRGF0ZSgpXG4gICAgKTtcbiAgICBjb25zdCB0b2RvMTIgPSBuZXcgVG9kbyhcbiAgICAgICAgXCJHbyBzaG9wcGluZ1wiLFxuICAgICAgICBcInRoaXMgaXMgc29tZSByYW5kb21lIGxvbmdlciBkZXNjcmlwdGlvbiBhYm91dCBob3cgYXdlc29tZSBpcyB0aGlzIHRvZG9cIixcbiAgICAgICAgMCxcbiAgICAgICAgbmV3IERhdGUoKVxuICAgICk7XG5cbiAgICBwcm9qZWN0MS5hZGRUb2RvKHRvZG8xMSk7XG4gICAgcHJvamVjdDEuYWRkVG9kbyh0b2RvMTIpO1xuXG4gICAgcHJvamVjdHMucHVzaChwcm9qZWN0MSk7XG59XG4iLCJpbXBvcnQgZGlzcGxheUNvbnRyb2xsZXIgZnJvbSBcIi4vZGlzcGxheUNvbnRyb2xsZXJcIjtcbmltcG9ydCBpbml0UGFnZSBmcm9tIFwiLi9sb2FkSW5pdFwiO1xuaW1wb3J0IFByb2plY3QgZnJvbSBcIi4vcHJvamVjdFwiO1xuaW1wb3J0IFRvZG8gZnJvbSBcIi4vdG9kb1wiO1xuXG5pbml0UGFnZSgpO1xuXG4vKiBFTEVNRU5UUyAqL1xuY29uc3QgYWRkVGFzayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXRhc2tcIik7XG5jb25zdCB0b2RvRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1mb3JtXCIpO1xuY29uc3QgdG9kb3NDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9zXCIpO1xuXG4vKiBMSVNURU5FUlMgKi9cbmFkZFRhc2suYWRkRXZlbnRMaXN0ZW5lcihcbiAgICBcImNsaWNrXCIsXG4gICAgZGlzcGxheUNvbnRyb2xsZXIudG9nZ2xlVG9kb0FkZEZvcm1cbik7XG5cbnRvZG9Gb3JtXG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2xvc2UtZm9ybVwiKVxuICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZGlzcGxheUNvbnRyb2xsZXIudG9nZ2xlVG9kb0FkZEZvcm0pO1xuXG50b2RvRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBbdGl0bGUsIGRlc2NyaXB0aW9uLCBwcmlvcml0eSwgZHVlRGF0ZV0gPSBbXG4gICAgICAgIHRvZG9Gb3JtLnRpdGxlLnZhbHVlLFxuICAgICAgICB0b2RvRm9ybS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgICAgdG9kb0Zvcm0ucHJpb3JpdHkudmFsdWUsXG4gICAgICAgIHRvZG9Gb3JtLmR1ZURhdGUudmFsdWUsXG4gICAgXTtcblxuICAgIGNvbnN0IHRvZG8gPSBuZXcgVG9kbyh0aXRsZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5LCBkdWVEYXRlKTtcbiAgICBQcm9qZWN0LmFjdGl2ZS5hZGRUb2RvKHRvZG8pO1xuICAgIHRvZG9Gb3JtLnJlc2V0KCk7XG4gICAgZGlzcGxheUNvbnRyb2xsZXIudG9nZ2xlVG9kb0FkZEZvcm0oKTtcbn0pO1xuXG50b2Rvc0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgIGNvbnN0IHQgPSBldnQudGFyZ2V0O1xuICAgIGNvbnN0IHRvZG9ET00gPSB0LmNsb3Nlc3QoXCIudG9kb1wiKTtcbiAgICBjb25zdCB0b2RvID0gUHJvamVjdC5hY3RpdmUuZ2V0VG9kbyh0b2RvRE9NLmlkKTtcbiAgICBpZiAoIXRvZG9ET00pIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHQudHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgIHRvZG8uY2hlY2tlZCA9IHQuY2hlY2tlZDtcbiAgICB9XG4gICAgaWYgKHQuY2xvc2VzdChcIi50b2RvLWJvZHlcIikpIHtcbiAgICAgICAgZGlzcGxheUNvbnRyb2xsZXIuY3JlYXRlRWRpdEZvcm0odG9kbyk7XG4gICAgfVxuICAgIGlmICh0LmNsYXNzTGlzdC5jb250YWlucyhcIm1kaS10cmFzaC1jYW4tb3V0bGluZVwiKSkge1xuICAgICAgICB0b2RvLmRlbGV0ZSgpO1xuICAgIH1cbn0pO1xuIl0sIm5hbWVzIjpbImFwcGVuZFRvZG8iLCJ0b2RvIiwidG9kb0RPTSIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJwcmlvcml0eSIsImR1ZURhdGUiLCJpZCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInByaW9yaXR5RE9NIiwidHlwZSIsIl9zZXRQcmlvcml0eSIsInRvZG9Cb2R5IiwiX2NyZWF0ZVRvZG9Cb2R5IiwiZGVsZXRlSWNvbiIsImNvbnNvbGUiLCJsb2ciLCJhcHBlbmRDaGlsZCIsIl9jcmVhdGVUb2RvIiwicXVlcnlTZWxlY3RvciIsInRvZG9UaXRsZSIsInRleHRDb250ZW50IiwidG9kb0Rlc2NyaXB0aW9uIiwic3Vic3RyIiwibGVuZ3RoIiwidG9kb0R1ZURhdGUiLCJjYWxlbmRhciIsInRvZG9EYXRlIiwidG9nZ2xlVG9kb0FkZEZvcm0iLCJ0b2dnbGUiLCJ0b2RvRm9ybSIsInJlc2V0IiwiYXBwZW5kUHJvamVjdCIsInByb2plY3QiLCJwcm9qZWN0RE9NIiwicHJvamVjdE5hbWUiLCJfY3JlYXRlUHJvamVjdCIsInNldEFjdGl2ZVByb2plY3QiLCJhY3RpdmVQcm9qZWN0IiwicmVtb3ZlIiwiaW5uZXJIVE1MIiwiX3JlbW92ZUFjdGl2ZVByb2plY3QiLCJnZXRFbGVtZW50QnlJZCIsInRvZG9zIiwiZm9yRWFjaCIsIl9zaG93UHJvamVjdFRvZG9zIiwiY3JlYXRlRWRpdEZvcm0iLCJlZGl0Rm9ybSIsImNsb25lTm9kZSIsIl9jbG9uZVRvZG9Gb3JtIiwiZGF0YXNldCIsInZhbHVlIiwidmFsdWVBc0RhdGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJlZGl0Iiwib25jZSIsImUiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJlZGl0VG9kbyIsInJlcGxhY2VXaXRoIiwicmVtb3ZlVG9kbyIsIlByb2plY3QiLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzbGljZSIsImRpc3BsYXlDb250cm9sbGVyIiwic2V0QWN0aXZlIiwiYWRkVG9kbyIsInB1c2giLCJzcGxpY2UiLCJmaW5kSW5kZXgiLCJnZXRUb2RvIiwiZmluZCIsInN0YXRpYyIsImFjdGl2ZSIsIlRvZG8iLCJjaGVja2VkIiwiZGVsZXRlIiwicHJvamVjdDEiLCJ0b2RvMTEiLCJEYXRlIiwidG9kbzEyIiwiaW5pdFBhZ2UiLCJhZGRUYXNrIiwidG9kb3NDb250YWluZXIiLCJ0IiwidGFyZ2V0IiwiY2xvc2VzdCIsImNvbnRhaW5zIl0sInNvdXJjZVJvb3QiOiIifQ==