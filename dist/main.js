(()=>{"use strict";function t(t){const e=function(t){const{title:e,description:o,priority:d,dueDate:i,id:s}=t,n=document.createElement("div");n.classList.add("todo");const c=document.createElement("input");switch(c.type="checkbox",c.classList.add("priority"),+d){case 0:default:c.classList.add("priority-low");break;case 1:c.classList.add("priority-medium");break;case 2:c.classList.add("priority-high")}const r=document.createElement("div");r.classList.add("todo-body");const a=document.createElement("div");if(a.classList.add("todo-title"),a.textContent=e,r.appendChild(a),o){const t=document.createElement("div");t.classList.add("todo-description"),t.textContent=o.substr(0,50)+(o.length>50?"...":""),r.appendChild(t)}if(i){const t=document.createElement("div");t.classList.add("todo-due-date");const e=document.createElement("div");e.classList.add("mdi"),e.classList.add("mdi-calendar-clock-outline");const o=document.createElement("div");o.classList.add("todo-date"),o.textContent=i,t.appendChild(e),t.appendChild(o),r.appendChild(t)}const l=document.createElement("div");return l.classList.add("mdi"),l.classList.add("mdi-trash-can-outline"),n.appendChild(c),n.appendChild(r),n.appendChild(l),n.id=s,n}(t);document.querySelector(".todos").appendChild(e)}const e={toggleTodoAddForm:function(){document.querySelector(".add-task").classList.toggle("hide"),document.querySelector(".todo-form").classList.toggle("hide")},appendProject:function(t){const e=function(t){const{title:e,id:o}=t,d=document.createElement("li");d.classList.add("project"),d.id=o;const i=document.createElement("span");i.classList.add("project-name"),i.textContent=e;const s=document.createElement("div");return s.classList.add("mdi"),s.classList.add("mdi-trash-can-outline"),d.appendChild(i),d.appendChild(s),d}(t);document.querySelector(".projects").appendChild(e)},setActiveProject:function(e){!function(){const t=document.querySelector(".project.active");t&&(t.classList.remove(".ative"),document.querySelector(".todos").innerHTML="")}(),document.getElementById(e.id).classList.add("active"),function(e){e.todos.forEach(t)}(e)},appendTodo:t,showEditForm:function(t){if(document.querySelector(".todo-form").dataset.id)return null;const{title:e,description:o,priority:d,dueDate:i,id:s}=t,n=document.getElementById(t.id),c=function(){const t=document.querySelector(".todo-form").cloneNode(!0);return t.reset(),t.classList.remove("hide"),t}();return c.dataset.id=s,c.title.value=e,c.description.value=o,c.priority.value=d,i&&(c.dueDate.valueAsDate=i),n.insertAdjacentElement("afterend",c),n.classList.add("hide"),c},editTodo:function(t){const{title:e,description:o,priority:d,id:i,dueDate:s}=t,n=document.getElementById(i),c=document.querySelector(".todos .todo-form");return n.querySelector(".todo-title").textContent=e,n.querySelector(".todo-description").textContent=o.substr(0,50)+(o.length>50?"...":""),n.querySelector(".priority").value=d,s&&(n.querySelector(".todo-date").valueAsDate=s),c.remove(),n.classList.remove("hide"),!0},removeTodo:function(t){document.getElementById(t).remove()}};class o{#t=[];#e=0;constructor(t){this.title=t,this.#e="id"+Math.random().toString(16).slice(2),e.appendProject(this),o.setActive(this)}addTodo(t){this.#t.push(t),e.appendTodo(t)}removeTodo(t){this.#t.splice(this.#t.findIndex((e=>e.id===t)),1),e.removeTodo(t)}getTodo(t){return this.#t.find((e=>e.id===t))}get id(){return this.#e}static setActive(t){o.#o=t,e.setActiveProject(t)}get todos(){return[...this.#t]}static#o;static get active(){return o.#o}}class d{checked=!1;#e=null;#d=null;constructor(t,e,d,i){this.title=t,this.description=e,this.priority=d,this.dueDate=i,this.#e="id"+Math.random().toString(16).slice(2),this.#d=o.active}edit(t,o,d,i){this.title=t,this.description=o,this.priority=d,this.dueDate=i,e.editTodo(this)}delete(){this.#d.removeTodo(this.#e)}get id(){return this.#e}}!function(){const t=new o("Today"),e=new d("Go out with trash","this is some randome not so short description",1,new Date),i=new d("Go shopping","this is some randome longer description about how awesome is this todo",0,new Date);t.addTodo(e),t.addTodo(i),[].push(t)}();const i=document.querySelector(".add-task"),s=document.querySelector(".todo-form"),n=document.querySelector(".todos");i.addEventListener("click",(t=>{e.toggleTodoAddForm()})),s.addEventListener("submit",(t=>{t.preventDefault();const[i,n,c,r]=[s.title.value,s.description.value,s.priority.value,s.dueDate.value],a=new d(i,n,c,r);o.active.addTodo(a),s.reset(),e.toggleTodoAddForm()})),n.addEventListener("click",(t=>{const d=t.target,i=d.closest(".todo"),s=o.active.getTodo(i.id);if(!i)return null;if("checkbox"===d.type&&(s.checked=d.checked),d.closest(".todo-body")){const t=e.showEditForm(s);if(null===t)return null;t.addEventListener("submit",(e=>{e.preventDefault();const[o,d,i,n]=[t.title.value,t.description.value,t.priority.value,t.dueDate.valueAsDate];s.edit(o,d,i,n)}),{once:!0})}d.classList.contains("mdi-trash-can-outline")&&s.delete()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVFnQixPQUFPUCxRQUFROUQsR0FDdkI0QyxFQUFTRSxRQUNUYyxFQUFrQmxDLG1CQUFtQixJQUd6Q3NELEVBQWVDLGlCQUFpQixTQUFVQyxJQUN0QyxNQUFNRSxFQUFJRixFQUFJRyxPQUNScEYsRUFBVW1GLEVBQUVFLFFBQVEsU0FDcEJ0RixFQUFPcUQsRUFBUWdCLE9BQU9ILFFBQVFqRSxFQUFRSyxJQUM1QyxJQUFLTCxFQUNELE9BQU8sS0FNWCxHQUhlLGFBQVhtRixFQUFFeEUsT0FDRlosRUFBS3VFLFFBQVVhLEVBQUViLFNBRWpCYSxFQUFFRSxRQUFRLGNBQWUsQ0FDekIsTUFBTTFDLEVBQVdnQixFQUFrQmxCLGFBQWExQyxHQUNoRCxHQUFpQixPQUFiNEMsRUFDQSxPQUFPLEtBR1hBLEVBQVNxQyxpQkFDTCxVQUNDQyxJQUNHQSxFQUFJQyxpQkFDSixNQUFPakYsRUFBT0MsRUFBYUMsRUFBVUMsR0FBVyxDQUM1Q3VDLEVBQVMxQyxNQUFNOEMsTUFDZkosRUFBU3pDLFlBQVk2QyxNQUNyQkosRUFBU3hDLFNBQVM0QyxNQUNsQkosRUFBU3ZDLFFBQVE0QyxhQUVyQmpELEVBQUt3RSxLQUFLdEUsRUFBT0MsRUFBYUMsRUFBVUMsRUFBUSxHQUVwRCxDQUFFa0YsTUFBTSxHQUVoQixDQUNJSCxFQUFFM0UsVUFBVStFLFNBQVMsMEJBQ3JCeEYsRUFBS3lFLFFBQ1QsRyIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tdG9kby1tYW5hZ2VyLy4vc3JjL2Rpc3BsYXlDb250cm9sbGVyLmpzIiwid2VicGFjazovL29kaW4tdG9kby1tYW5hZ2VyLy4vc3JjL3Byb2plY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLW1hbmFnZXIvLi9zcmMvdG9kby5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbWFuYWdlci8uL3NyYy9sb2FkSW5pdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbWFuYWdlci8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBhcHBlbmRQcm9qZWN0KHByb2plY3QpIHtcbiAgICBjb25zdCBwcm9qZWN0RE9NID0gX2NyZWF0ZVByb2plY3QocHJvamVjdCk7XG4gICAgY29uc3QgcHJvamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RzXCIpO1xuICAgIHByb2plY3RzLmFwcGVuZENoaWxkKHByb2plY3RET00pO1xufVxuXG5mdW5jdGlvbiBfY3JlYXRlUHJvamVjdChwcm9qZWN0KSB7XG4gICAgY29uc3QgeyB0aXRsZSwgaWQgfSA9IHByb2plY3Q7XG4gICAgY29uc3QgcHJvamVjdERPTSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgICBwcm9qZWN0RE9NLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0XCIpO1xuICAgIHByb2plY3RET00uaWQgPSBpZDtcblxuICAgIGNvbnN0IHByb2plY3ROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgcHJvamVjdE5hbWUuY2xhc3NMaXN0LmFkZChcInByb2plY3QtbmFtZVwiKTtcbiAgICBwcm9qZWN0TmFtZS50ZXh0Q29udGVudCA9IHRpdGxlO1xuXG4gICAgY29uc3QgZGVsZXRlSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgZGVsZXRlSWNvbi5jbGFzc0xpc3QuYWRkKFwibWRpXCIpO1xuICAgIGRlbGV0ZUljb24uY2xhc3NMaXN0LmFkZChcIm1kaS10cmFzaC1jYW4tb3V0bGluZVwiKTtcblxuICAgIHByb2plY3RET00uYXBwZW5kQ2hpbGQocHJvamVjdE5hbWUpO1xuICAgIHByb2plY3RET00uYXBwZW5kQ2hpbGQoZGVsZXRlSWNvbik7XG5cbiAgICByZXR1cm4gcHJvamVjdERPTTtcbn1cblxuZnVuY3Rpb24gc2V0QWN0aXZlUHJvamVjdChwcm9qZWN0KSB7XG4gICAgX3JlbW92ZUFjdGl2ZVByb2plY3QoKTtcbiAgICBjb25zdCBwcm9qZWN0RE9NID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJvamVjdC5pZCk7XG4gICAgcHJvamVjdERPTS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgIF9zaG93UHJvamVjdFRvZG9zKHByb2plY3QpO1xufVxuXG5mdW5jdGlvbiBfcmVtb3ZlQWN0aXZlUHJvamVjdCgpIHtcbiAgICBjb25zdCBhY3RpdmVQcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LmFjdGl2ZVwiKTtcbiAgICBpZiAoIWFjdGl2ZVByb2plY3QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhY3RpdmVQcm9qZWN0LmNsYXNzTGlzdC5yZW1vdmUoXCIuYXRpdmVcIik7XG4gICAgX3JlbW92ZUN1cnJlbnRUb2RvcygpO1xufVxuXG5mdW5jdGlvbiBfcmVtb3ZlQ3VycmVudFRvZG9zKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb3NcIik7XG4gICAgY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG59XG5cbmZ1bmN0aW9uIF9zaG93UHJvamVjdFRvZG9zKHByb2plY3QpIHtcbiAgICBjb25zdCB0b2RvcyA9IHByb2plY3QudG9kb3M7XG4gICAgdG9kb3MuZm9yRWFjaChhcHBlbmRUb2RvKTtcbn1cblxuZnVuY3Rpb24gYXBwZW5kVG9kbyh0b2RvKSB7XG4gICAgY29uc3QgdG9kb0RPTSA9IF9jcmVhdGVUb2RvKHRvZG8pO1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb3NcIik7XG5cbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodG9kb0RPTSk7XG59XG5cbmZ1bmN0aW9uIF9jcmVhdGVUb2RvKHRvZG8pIHtcbiAgICBjb25zdCB7IHRpdGxlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHksIGR1ZURhdGUsIGlkIH0gPSB0b2RvO1xuICAgIGNvbnN0IHRvZG9ET00gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRvZG9ET00uY2xhc3NMaXN0LmFkZChcInRvZG9cIik7XG5cbiAgICBjb25zdCBwcmlvcml0eURPTSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBwcmlvcml0eURPTS50eXBlID0gXCJjaGVja2JveFwiO1xuICAgIHByaW9yaXR5RE9NLmNsYXNzTGlzdC5hZGQoXCJwcmlvcml0eVwiKTtcblxuICAgIHN3aXRjaCAoK3ByaW9yaXR5KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHByaW9yaXR5RE9NLmNsYXNzTGlzdC5hZGQoXCJwcmlvcml0eS1sb3dcIik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcHJpb3JpdHlET00uY2xhc3NMaXN0LmFkZChcInByaW9yaXR5LW1lZGl1bVwiKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHByaW9yaXR5RE9NLmNsYXNzTGlzdC5hZGQoXCJwcmlvcml0eS1oaWdoXCIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBwcmlvcml0eURPTS5jbGFzc0xpc3QuYWRkKFwicHJpb3JpdHktbG93XCIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgY29uc3QgdG9kb0JvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRvZG9Cb2R5LmNsYXNzTGlzdC5hZGQoXCJ0b2RvLWJvZHlcIik7XG5cbiAgICBjb25zdCB0b2RvVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRvZG9UaXRsZS5jbGFzc0xpc3QuYWRkKFwidG9kby10aXRsZVwiKTtcbiAgICB0b2RvVGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZTtcblxuICAgIHRvZG9Cb2R5LmFwcGVuZENoaWxkKHRvZG9UaXRsZSk7XG5cbiAgICBpZiAoZGVzY3JpcHRpb24pIHtcbiAgICAgICAgY29uc3QgdG9kb0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdG9kb0Rlc2NyaXB0aW9uLmNsYXNzTGlzdC5hZGQoXCJ0b2RvLWRlc2NyaXB0aW9uXCIpO1xuICAgICAgICB0b2RvRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPVxuICAgICAgICAgICAgZGVzY3JpcHRpb24uc3Vic3RyKDAsIDUwKSArXG4gICAgICAgICAgICAoZGVzY3JpcHRpb24ubGVuZ3RoID4gNTAgPyBcIi4uLlwiIDogXCJcIik7XG5cbiAgICAgICAgdG9kb0JvZHkuYXBwZW5kQ2hpbGQodG9kb0Rlc2NyaXB0aW9uKTtcbiAgICB9XG4gICAgaWYgKGR1ZURhdGUpIHtcbiAgICAgICAgY29uc3QgdG9kb0R1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0b2RvRHVlRGF0ZS5jbGFzc0xpc3QuYWRkKFwidG9kby1kdWUtZGF0ZVwiKTtcblxuICAgICAgICBjb25zdCBjYWxlbmRhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGNhbGVuZGFyLmNsYXNzTGlzdC5hZGQoXCJtZGlcIik7XG4gICAgICAgIGNhbGVuZGFyLmNsYXNzTGlzdC5hZGQoXCJtZGktY2FsZW5kYXItY2xvY2stb3V0bGluZVwiKTtcblxuICAgICAgICBjb25zdCB0b2RvRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRvZG9EYXRlLmNsYXNzTGlzdC5hZGQoXCJ0b2RvLWRhdGVcIik7XG4gICAgICAgIHRvZG9EYXRlLnRleHRDb250ZW50ID0gZHVlRGF0ZTtcblxuICAgICAgICB0b2RvRHVlRGF0ZS5hcHBlbmRDaGlsZChjYWxlbmRhcik7XG4gICAgICAgIHRvZG9EdWVEYXRlLmFwcGVuZENoaWxkKHRvZG9EYXRlKTtcblxuICAgICAgICB0b2RvQm9keS5hcHBlbmRDaGlsZCh0b2RvRHVlRGF0ZSk7XG4gICAgfVxuXG4gICAgY29uc3QgZGVsZXRlSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgZGVsZXRlSWNvbi5jbGFzc0xpc3QuYWRkKFwibWRpXCIpO1xuICAgIGRlbGV0ZUljb24uY2xhc3NMaXN0LmFkZChcIm1kaS10cmFzaC1jYW4tb3V0bGluZVwiKTtcblxuICAgIHRvZG9ET00uYXBwZW5kQ2hpbGQocHJpb3JpdHlET00pO1xuICAgIHRvZG9ET00uYXBwZW5kQ2hpbGQodG9kb0JvZHkpO1xuICAgIHRvZG9ET00uYXBwZW5kQ2hpbGQoZGVsZXRlSWNvbik7XG5cbiAgICB0b2RvRE9NLmlkID0gaWQ7XG5cbiAgICByZXR1cm4gdG9kb0RPTTtcbn1cblxuZnVuY3Rpb24gdG9nZ2xlVG9kb0FkZEZvcm0oKSB7XG4gICAgY29uc3QgYWRkVGFzayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXRhc2tcIik7XG4gICAgYWRkVGFzay5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZVwiKTtcblxuICAgIGNvbnN0IHRvZG9Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWZvcm1cIik7XG4gICAgdG9kb0Zvcm0uY2xhc3NMaXN0LnRvZ2dsZShcImhpZGVcIik7XG59XG5cbmZ1bmN0aW9uIF9jbG9uZVRvZG9Gb3JtKCkge1xuICAgIGNvbnN0IHRvZG9Gb3JtID0gZG9jdW1lbnRcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1mb3JtXCIpXG4gICAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdG9kb0Zvcm0ucmVzZXQoKTtcbiAgICB0b2RvRm9ybS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcblxuICAgIHJldHVybiB0b2RvRm9ybTtcbn1cblxuZnVuY3Rpb24gc2hvd0VkaXRGb3JtKHRvZG8pIHtcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWZvcm1cIikuZGF0YXNldC5pZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgeyB0aXRsZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5LCBkdWVEYXRlLCBpZCB9ID0gdG9kbztcbiAgICBjb25zdCB0b2RvRE9NID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodG9kby5pZCk7XG4gICAgY29uc3QgdG9kb0Zvcm0gPSBfY2xvbmVUb2RvRm9ybSgpO1xuXG4gICAgdG9kb0Zvcm0uZGF0YXNldC5pZCA9IGlkO1xuICAgIHRvZG9Gb3JtLnRpdGxlLnZhbHVlID0gdGl0bGU7XG4gICAgdG9kb0Zvcm0uZGVzY3JpcHRpb24udmFsdWUgPSBkZXNjcmlwdGlvbjtcbiAgICB0b2RvRm9ybS5wcmlvcml0eS52YWx1ZSA9IHByaW9yaXR5O1xuICAgIGlmIChkdWVEYXRlKSB7XG4gICAgICAgIHRvZG9Gb3JtLmR1ZURhdGUudmFsdWVBc0RhdGUgPSBkdWVEYXRlO1xuICAgIH1cblxuICAgIHRvZG9ET00uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJlbmRcIiwgdG9kb0Zvcm0pO1xuICAgIHRvZG9ET00uY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XG5cbiAgICByZXR1cm4gdG9kb0Zvcm07XG59XG5cbmZ1bmN0aW9uIGVkaXRUb2RvKHRvZG8pIHtcbiAgICBjb25zdCB7IHRpdGxlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHksIGlkLCBkdWVEYXRlIH0gPSB0b2RvO1xuXG4gICAgY29uc3QgdG9kb0RPTSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICBjb25zdCB0b2RvRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb3MgLnRvZG8tZm9ybVwiKTtcblxuICAgIHRvZG9ET00ucXVlcnlTZWxlY3RvcihcIi50b2RvLXRpdGxlXCIpLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgdG9kb0RPTS5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tZGVzY3JpcHRpb25cIikudGV4dENvbnRlbnQgPVxuICAgICAgICBkZXNjcmlwdGlvbi5zdWJzdHIoMCwgNTApICtcbiAgICAgICAgKGRlc2NyaXB0aW9uLmxlbmd0aCA+IDUwID8gXCIuLi5cIiA6IFwiXCIpO1xuICAgIHRvZG9ET00ucXVlcnlTZWxlY3RvcihcIi5wcmlvcml0eVwiKS52YWx1ZSA9IHByaW9yaXR5O1xuXG4gICAgaWYgKGR1ZURhdGUpIHtcbiAgICAgICAgdG9kb0RPTS5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tZGF0ZVwiKS52YWx1ZUFzRGF0ZSA9IGR1ZURhdGU7XG4gICAgfVxuXG4gICAgdG9kb0Zvcm0ucmVtb3ZlKCk7XG4gICAgdG9kb0RPTS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlVG9kbyhpZCkge1xuICAgIGNvbnN0IHRvZG8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgdG9kby5yZW1vdmUoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIHRvZ2dsZVRvZG9BZGRGb3JtLFxuICAgIGFwcGVuZFByb2plY3QsXG4gICAgc2V0QWN0aXZlUHJvamVjdCxcbiAgICBhcHBlbmRUb2RvLFxuICAgIHNob3dFZGl0Rm9ybSxcbiAgICBlZGl0VG9kbyxcbiAgICByZW1vdmVUb2RvLFxufTtcbiIsImltcG9ydCBkaXNwbGF5Q29udHJvbGxlciBmcm9tIFwiLi9kaXNwbGF5Q29udHJvbGxlci5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9qZWN0IHtcbiAgICAjdG9kb3MgPSBbXTtcbiAgICAjaWQgPSAwO1xuICAgIGNvbnN0cnVjdG9yKHRpdGxlKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy4jaWQgPSBcImlkXCIgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KS5zbGljZSgyKTtcbiAgICAgICAgZGlzcGxheUNvbnRyb2xsZXIuYXBwZW5kUHJvamVjdCh0aGlzKTtcbiAgICAgICAgUHJvamVjdC5zZXRBY3RpdmUodGhpcyk7XG4gICAgfVxuXG4gICAgYWRkVG9kbyh0b2RvKSB7XG4gICAgICAgIHRoaXMuI3RvZG9zLnB1c2godG9kbyk7XG4gICAgICAgIGRpc3BsYXlDb250cm9sbGVyLmFwcGVuZFRvZG8odG9kbyk7XG4gICAgfVxuXG4gICAgcmVtb3ZlVG9kbyhpZCkge1xuICAgICAgICB0aGlzLiN0b2Rvcy5zcGxpY2UoXG4gICAgICAgICAgICB0aGlzLiN0b2Rvcy5maW5kSW5kZXgoKHRvZG8pID0+IHRvZG8uaWQgPT09IGlkKSxcbiAgICAgICAgICAgIDFcbiAgICAgICAgKTtcbiAgICAgICAgZGlzcGxheUNvbnRyb2xsZXIucmVtb3ZlVG9kbyhpZCk7XG4gICAgfVxuXG4gICAgZ2V0VG9kbyhpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jdG9kb3MuZmluZCgodG9kbykgPT4gdG9kby5pZCA9PT0gaWQpO1xuICAgIH1cblxuICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2lkO1xuICAgIH1cblxuICAgIHN0YXRpYyBzZXRBY3RpdmUocHJvamVjdCkge1xuICAgICAgICBQcm9qZWN0LiNhY3RpdmUgPSBwcm9qZWN0O1xuICAgICAgICBkaXNwbGF5Q29udHJvbGxlci5zZXRBY3RpdmVQcm9qZWN0KHByb2plY3QpO1xuICAgIH1cblxuICAgIGdldCB0b2RvcygpIHtcbiAgICAgICAgcmV0dXJuIFsuLi50aGlzLiN0b2Rvc107XG4gICAgfVxuXG4gICAgc3RhdGljICNhY3RpdmU7XG4gICAgc3RhdGljIGdldCBhY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiBQcm9qZWN0LiNhY3RpdmU7XG4gICAgfVxufVxuIiwiaW1wb3J0IGRpc3BsYXlDb250cm9sbGVyIGZyb20gXCIuL2Rpc3BsYXlDb250cm9sbGVyXCI7XG5pbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9wcm9qZWN0XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRvZG8ge1xuICAgIGNoZWNrZWQgPSBmYWxzZTtcbiAgICAjaWQgPSBudWxsO1xuICAgICNwcm9qZWN0ID0gbnVsbDtcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5LCBkdWVEYXRlKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgICAgIHRoaXMuI2lkID0gXCJpZFwiICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygxNikuc2xpY2UoMik7XG4gICAgICAgIHRoaXMuI3Byb2plY3QgPSBQcm9qZWN0LmFjdGl2ZTtcbiAgICB9XG5cbiAgICBlZGl0KHRpdGxlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHksIGR1ZURhdGUpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICAgICAgZGlzcGxheUNvbnRyb2xsZXIuZWRpdFRvZG8odGhpcyk7XG4gICAgfVxuXG4gICAgZGVsZXRlKCkge1xuICAgICAgICB0aGlzLiNwcm9qZWN0LnJlbW92ZVRvZG8odGhpcy4jaWQpO1xuICAgIH1cblxuICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2lkO1xuICAgIH1cbn1cbiIsImltcG9ydCBQcm9qZWN0IGZyb20gXCIuL3Byb2plY3RcIjtcbmltcG9ydCBUb2RvIGZyb20gXCIuL3RvZG9cIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5pdFBhZ2UoKSB7XG4gICAgY29uc3QgcHJvamVjdHMgPSBbXTtcblxuICAgIGNvbnN0IHByb2plY3QxID0gbmV3IFByb2plY3QoXCJUb2RheVwiKTtcblxuICAgIGNvbnN0IHRvZG8xMSA9IG5ldyBUb2RvKFxuICAgICAgICBcIkdvIG91dCB3aXRoIHRyYXNoXCIsXG4gICAgICAgIFwidGhpcyBpcyBzb21lIHJhbmRvbWUgbm90IHNvIHNob3J0IGRlc2NyaXB0aW9uXCIsXG4gICAgICAgIDEsXG4gICAgICAgIG5ldyBEYXRlKClcbiAgICApO1xuICAgIGNvbnN0IHRvZG8xMiA9IG5ldyBUb2RvKFxuICAgICAgICBcIkdvIHNob3BwaW5nXCIsXG4gICAgICAgIFwidGhpcyBpcyBzb21lIHJhbmRvbWUgbG9uZ2VyIGRlc2NyaXB0aW9uIGFib3V0IGhvdyBhd2Vzb21lIGlzIHRoaXMgdG9kb1wiLFxuICAgICAgICAwLFxuICAgICAgICBuZXcgRGF0ZSgpXG4gICAgKTtcblxuICAgIHByb2plY3QxLmFkZFRvZG8odG9kbzExKTtcbiAgICBwcm9qZWN0MS5hZGRUb2RvKHRvZG8xMik7XG5cbiAgICBwcm9qZWN0cy5wdXNoKHByb2plY3QxKTtcbn1cbiIsImltcG9ydCBkaXNwbGF5Q29udHJvbGxlciBmcm9tIFwiLi9kaXNwbGF5Q29udHJvbGxlclwiO1xuaW1wb3J0IGluaXRQYWdlIGZyb20gXCIuL2xvYWRJbml0XCI7XG5pbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9wcm9qZWN0XCI7XG5pbXBvcnQgVG9kbyBmcm9tIFwiLi90b2RvXCI7XG5cbmluaXRQYWdlKCk7XG5cbi8qIEVMRU1FTlRTICovXG5jb25zdCBhZGRUYXNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFza1wiKTtcbmNvbnN0IHRvZG9Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWZvcm1cIik7XG5jb25zdCB0b2Rvc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb3NcIik7XG5cbi8qIExJU1RFTkVSUyAqL1xuYWRkVGFzay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgIGRpc3BsYXlDb250cm9sbGVyLnRvZ2dsZVRvZG9BZGRGb3JtKCk7XG59KTtcblxudG9kb0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgW3RpdGxlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHksIGR1ZURhdGVdID0gW1xuICAgICAgICB0b2RvRm9ybS50aXRsZS52YWx1ZSxcbiAgICAgICAgdG9kb0Zvcm0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICAgIHRvZG9Gb3JtLnByaW9yaXR5LnZhbHVlLFxuICAgICAgICB0b2RvRm9ybS5kdWVEYXRlLnZhbHVlLFxuICAgIF07XG5cbiAgICBjb25zdCB0b2RvID0gbmV3IFRvZG8odGl0bGUsIGRlc2NyaXB0aW9uLCBwcmlvcml0eSwgZHVlRGF0ZSk7XG4gICAgUHJvamVjdC5hY3RpdmUuYWRkVG9kbyh0b2RvKTtcbiAgICB0b2RvRm9ybS5yZXNldCgpO1xuICAgIGRpc3BsYXlDb250cm9sbGVyLnRvZ2dsZVRvZG9BZGRGb3JtKCk7XG59KTtcblxudG9kb3NDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICBjb25zdCB0ID0gZXZ0LnRhcmdldDtcbiAgICBjb25zdCB0b2RvRE9NID0gdC5jbG9zZXN0KFwiLnRvZG9cIik7XG4gICAgY29uc3QgdG9kbyA9IFByb2plY3QuYWN0aXZlLmdldFRvZG8odG9kb0RPTS5pZCk7XG4gICAgaWYgKCF0b2RvRE9NKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICh0LnR5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICB0b2RvLmNoZWNrZWQgPSB0LmNoZWNrZWQ7XG4gICAgfVxuICAgIGlmICh0LmNsb3Nlc3QoXCIudG9kby1ib2R5XCIpKSB7XG4gICAgICAgIGNvbnN0IHRvZG9Gb3JtID0gZGlzcGxheUNvbnRyb2xsZXIuc2hvd0VkaXRGb3JtKHRvZG8pO1xuICAgICAgICBpZiAodG9kb0Zvcm0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdG9kb0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgIFwic3VibWl0XCIsXG4gICAgICAgICAgICAoZXZ0KSA9PiB7XG4gICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgW3RpdGxlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHksIGR1ZURhdGVdID0gW1xuICAgICAgICAgICAgICAgICAgICB0b2RvRm9ybS50aXRsZS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdG9kb0Zvcm0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHRvZG9Gb3JtLnByaW9yaXR5LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0b2RvRm9ybS5kdWVEYXRlLnZhbHVlQXNEYXRlLFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgdG9kby5lZGl0KHRpdGxlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHksIGR1ZURhdGUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgb25jZTogdHJ1ZSB9XG4gICAgICAgICk7XG4gICAgfVxuICAgIGlmICh0LmNsYXNzTGlzdC5jb250YWlucyhcIm1kaS10cmFzaC1jYW4tb3V0bGluZVwiKSkge1xuICAgICAgICB0b2RvLmRlbGV0ZSgpO1xuICAgIH1cbn0pO1xuIl0sIm5hbWVzIjpbImFwcGVuZFRvZG8iLCJ0b2RvIiwidG9kb0RPTSIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJwcmlvcml0eSIsImR1ZURhdGUiLCJpZCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInByaW9yaXR5RE9NIiwidHlwZSIsInRvZG9Cb2R5IiwidG9kb1RpdGxlIiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsInRvZG9EZXNjcmlwdGlvbiIsInN1YnN0ciIsImxlbmd0aCIsInRvZG9EdWVEYXRlIiwiY2FsZW5kYXIiLCJ0b2RvRGF0ZSIsImRlbGV0ZUljb24iLCJfY3JlYXRlVG9kbyIsInF1ZXJ5U2VsZWN0b3IiLCJ0b2dnbGVUb2RvQWRkRm9ybSIsInRvZ2dsZSIsImFwcGVuZFByb2plY3QiLCJwcm9qZWN0IiwicHJvamVjdERPTSIsInByb2plY3ROYW1lIiwiX2NyZWF0ZVByb2plY3QiLCJzZXRBY3RpdmVQcm9qZWN0IiwiYWN0aXZlUHJvamVjdCIsInJlbW92ZSIsImlubmVySFRNTCIsIl9yZW1vdmVBY3RpdmVQcm9qZWN0IiwiZ2V0RWxlbWVudEJ5SWQiLCJ0b2RvcyIsImZvckVhY2giLCJfc2hvd1Byb2plY3RUb2RvcyIsInNob3dFZGl0Rm9ybSIsImRhdGFzZXQiLCJ0b2RvRm9ybSIsImNsb25lTm9kZSIsInJlc2V0IiwiX2Nsb25lVG9kb0Zvcm0iLCJ2YWx1ZSIsInZhbHVlQXNEYXRlIiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwiZWRpdFRvZG8iLCJyZW1vdmVUb2RvIiwiUHJvamVjdCIsImNvbnN0cnVjdG9yIiwidGhpcyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInNsaWNlIiwiZGlzcGxheUNvbnRyb2xsZXIiLCJzZXRBY3RpdmUiLCJhZGRUb2RvIiwicHVzaCIsInNwbGljZSIsImZpbmRJbmRleCIsImdldFRvZG8iLCJmaW5kIiwic3RhdGljIiwiYWN0aXZlIiwiVG9kbyIsImNoZWNrZWQiLCJlZGl0IiwiZGVsZXRlIiwicHJvamVjdDEiLCJ0b2RvMTEiLCJEYXRlIiwidG9kbzEyIiwiaW5pdFBhZ2UiLCJhZGRUYXNrIiwidG9kb3NDb250YWluZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJ0IiwidGFyZ2V0IiwiY2xvc2VzdCIsIm9uY2UiLCJjb250YWlucyJdLCJzb3VyY2VSb290IjoiIn0=